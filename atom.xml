<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Kiwi&#39;s Wiki</title>
  
  
  <link href="http://kiwi0093.github.io/Wiki-site/atom.xml" rel="self"/>
  
  <link href="http://kiwi0093.github.io/Wiki-site/"/>
  <updated>2021-07-14T03:44:58.105Z</updated>
  <id>http://kiwi0093.github.io/Wiki-site/</id>
  
  <author>
    <name>Kiwi</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Portainer-ce agent</title>
    <link href="http://kiwi0093.github.io/Wiki-site/wiki/VM&amp;Container/7-portainer-ce-agent/"/>
    <id>http://kiwi0093.github.io/Wiki-site/wiki/VM&amp;Container/7-portainer-ce-agent/</id>
    <published>2021-07-14T03:39:55.459Z</published>
    <updated>2021-07-14T03:44:58.105Z</updated>
    
    <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>手上還有可以使用的VPS,我就想說乾脆都掛上Docker+portainer-ce agent這樣就可以全部一起遠端控制</p><span id="more"></span><h1 id="基本做法"><a href="#基本做法" class="headerlink" title="基本做法"></a>基本做法</h1><h2 id="Portainer-agent"><a href="#Portainer-agent" class="headerlink" title="Portainer-agent"></a>Portainer-agent</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#portainer-agent.yml</span></span><br><span class="line">---------------------------------------------------------------------------------------------------------------------------------</span><br><span class="line">version: <span class="string">&#x27;3&#x27;</span></span><br><span class="line">services:</span><br><span class="line">  portainer:</span><br><span class="line">    image:  portainer/agent:latest</span><br><span class="line">    container_name: portainer_agent</span><br><span class="line">    ports:</span><br><span class="line">      - 9001:9001</span><br><span class="line">    volumes:</span><br><span class="line">      - /var/run/docker.sock:/var/run/docker.sock</span><br><span class="line">      - /var/lib/docker/volumes:/var/lib/docker/volumes</span><br><span class="line">    restart: always</span><br></pre></td></tr></table></figure><p>然後就是<code>docker-compose up -d</code>就可以了</p>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h1&gt;&lt;p&gt;手上還有可以使用的VPS,我就想說乾脆都掛上Docker+portainer-ce agent這樣就可以全部一起遠端控制&lt;/p&gt;</summary>
    
    
    
    <category term="VM&amp;Container" scheme="http://kiwi0093.github.io/Wiki-site/categories/VM-Container/"/>
    
    
    <category term="VM" scheme="http://kiwi0093.github.io/Wiki-site/tags/VM/"/>
    
    <category term="Container" scheme="http://kiwi0093.github.io/Wiki-site/tags/Container/"/>
    
  </entry>
  
  <entry>
    <title>Nginx Proxy Manager</title>
    <link href="http://kiwi0093.github.io/Wiki-site/wiki/VM&amp;Container/6-nginx-proxy-manager/"/>
    <id>http://kiwi0093.github.io/Wiki-site/wiki/VM&amp;Container/6-nginx-proxy-manager/</id>
    <published>2021-07-14T01:27:59.684Z</published>
    <updated>2021-07-14T03:39:30.452Z</updated>
    
    <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>這個東西是等於是一個Web GUI界面的Nginx plug in,雖然他要用到SQL DB,但是說穿了就是把nginx的設定改成圖形化並且強化反向代理的設定以及加上certbot的功能不用自己再手動處理SSL KEY（不過我還是希望他可以直接load進已經有的key)</p><span id="more"></span><h1 id="基本做法"><a href="#基本做法" class="headerlink" title="基本做法"></a>基本做法</h1><h2 id="MariaDB"><a href="#MariaDB" class="headerlink" title="MariaDB"></a>MariaDB</h2><p>基本上可以沿用Librenms那篇裡面已經建好的mariadb,建個帳號跟database就好,我實際上的作法是直接用phpAdmin建一個就解決了</p><h2 id="Nginx-Proxy-Manager"><a href="#Nginx-Proxy-Manager" class="headerlink" title="Nginx Proxy Manager"></a>Nginx Proxy Manager</h2><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#docker-compose.yml</span></span><br><span class="line"><span class="string">--------------------------------------------------------------------------------------------------------------------------------</span></span><br><span class="line"><span class="attr">version:</span> <span class="string">&#x27;3&#x27;</span></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">app:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">&#x27;jc21/nginx-proxy-manager:latest&#x27;</span></span><br><span class="line">    <span class="attr">restart:</span> <span class="string">unless-stopped</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&#x27;80:80&#x27;</span><span class="comment">#這個是正常的http</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&#x27;81:81&#x27;</span><span class="comment">#這個是管理界面</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&#x27;443:443&#x27;</span><span class="comment">#這個是正常的https</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="attr">DB_MYSQL_HOST:</span> <span class="string">&quot;$&#123;your_db_ip&#125;&quot;</span></span><br><span class="line">      <span class="attr">DB_MYSQL_PORT:</span> <span class="number">3306</span></span><br><span class="line">      <span class="attr">DB_MYSQL_USER:</span> <span class="string">&quot;npm&quot;</span></span><br><span class="line">      <span class="attr">DB_MYSQL_PASSWORD:</span> <span class="string">&quot;$&#123;your_passwd&#125;&quot;</span></span><br><span class="line">      <span class="attr">DB_MYSQL_NAME:</span> <span class="string">&quot;npm&quot;</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">/var/lib/docker/volumes/nginx-proxy-manager/data:/data</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">/etc/letsencrypt:/etc/letsencrypt</span></span><br></pre></td></tr></table></figure><h1 id="使用方法"><a href="#使用方法" class="headerlink" title="使用方法"></a>使用方法</h1><ol><li>設定帳號</li></ol><p>架設好了之後先用預設的帳號密碼進入一進去他就會強迫你修改admin的帳號密碼</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#預設的帳號密碼</span></span><br><span class="line">Email:    admin@example.com</span><br><span class="line">Password: changeme</span><br></pre></td></tr></table></figure><ol start="2"><li>注意事項<ul><li>他不能直接用已經申請好的key,得利用他的界面重新申請cert.</li><li>所有的DN主目錄不能是空的服務,所以我才會弄個heimdall來當首頁</li><li>所有特殊設定請在custom location -&gt; location旁的齒輪內貼上,不然不會動</li></ul></li></ol><h2 id="Calibre-web問題"><a href="#Calibre-web問題" class="headerlink" title="Calibre-web問題"></a>Calibre-web問題</h2><p>貼上下列敘述後就可以動了</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">proxy_bind <span class="variable">$server_addr</span>;</span><br><span class="line">proxy_set_header Host <span class="variable">$http_host</span>;</span><br><span class="line">proxy_set_header X-Forwarded-For <span class="variable">$proxy_add_x_forwarded_for</span>;</span><br><span class="line">proxy_set_header X-Scheme <span class="variable">$scheme</span>;</span><br><span class="line">proxy_set_header X-Script-Name /<span class="variable">$&#123;your_location&#125;</span>;</span><br></pre></td></tr></table></figure><h2 id="Portainer-ce問題"><a href="#Portainer-ce問題" class="headerlink" title="Portainer-ce問題"></a>Portainer-ce問題</h2><p>目前還沒找到讓portainer-ce在location下正常運作的方法,其實可以很奢侈的每一種服務都掛一個DN的方法來做virtual host的作法應該就可以了</p>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h1&gt;&lt;p&gt;這個東西是等於是一個Web GUI界面的Nginx plug in,雖然他要用到SQL DB,但是說穿了就是把nginx的設定改成圖形化並且強化反向代理的設定以及加上certbot的功能不用自己再手動處理SSL KEY（不過我還是希望他可以直接load進已經有的key)&lt;/p&gt;</summary>
    
    
    
    <category term="VM&amp;Container" scheme="http://kiwi0093.github.io/Wiki-site/categories/VM-Container/"/>
    
    
    <category term="VM" scheme="http://kiwi0093.github.io/Wiki-site/tags/VM/"/>
    
    <category term="Container" scheme="http://kiwi0093.github.io/Wiki-site/tags/Container/"/>
    
  </entry>
  
  <entry>
    <title>Heimdall</title>
    <link href="http://kiwi0093.github.io/Wiki-site/wiki/VM&amp;Container/5-heimdall/"/>
    <id>http://kiwi0093.github.io/Wiki-site/wiki/VM&amp;Container/5-heimdall/</id>
    <published>2021-07-14T01:27:46.283Z</published>
    <updated>2021-07-14T01:44:21.332Z</updated>
    
    <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>其實我也不是特別需要這種Dashboard服務,但是我總覺的缺個類似封面的網頁所以就拿來用一下</p><span id="more"></span><h1 id="基本做法"><a href="#基本做法" class="headerlink" title="基本做法"></a>基本做法</h1><p>直接來個docker-compose.yml好了</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">version: <span class="string">&quot;2.1&quot;</span></span><br><span class="line">services:</span><br><span class="line">  heimdall:</span><br><span class="line">    image: ghcr.io/linuxserver/heimdall</span><br><span class="line">    container_name: heimdall</span><br><span class="line">    environment:</span><br><span class="line">      - PUID=1000</span><br><span class="line">      - PGID=1000</span><br><span class="line">      - TZ=Asia/Taipei</span><br><span class="line">    volumes:</span><br><span class="line">      - /var/lib/docker/volumes/heimdall/config:/config</span><br><span class="line">    ports:</span><br><span class="line">      - 8081:80</span><br><span class="line">      - 4343:443</span><br><span class="line">    restart: unless-stopped</span><br></pre></td></tr></table></figure><h1 id="結論"><a href="#結論" class="headerlink" title="結論"></a>結論</h1><p>裝得很簡單也很快,基本上沒什麼特殊的,我是拿來當入口網站用的,另外其實port 443可以不用理他,因為我後面都用nginx來做ssl代理所以有沒有ssl都可以</p>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h1&gt;&lt;p&gt;其實我也不是特別需要這種Dashboard服務,但是我總覺的缺個類似封面的網頁所以就拿來用一下&lt;/p&gt;</summary>
    
    
    
    <category term="VM&amp;Container" scheme="http://kiwi0093.github.io/Wiki-site/categories/VM-Container/"/>
    
    
    <category term="VM" scheme="http://kiwi0093.github.io/Wiki-site/tags/VM/"/>
    
    <category term="Container" scheme="http://kiwi0093.github.io/Wiki-site/tags/Container/"/>
    
  </entry>
  
  <entry>
    <title>Photon OS 4.0 GA</title>
    <link href="http://kiwi0093.github.io/Wiki-site/wiki/VM&amp;Container/1-PhotonOS/"/>
    <id>http://kiwi0093.github.io/Wiki-site/wiki/VM&amp;Container/1-PhotonOS/</id>
    <published>2021-07-12T03:11:22.840Z</published>
    <updated>2021-07-12T03:11:22.840Z</updated>
    
    <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>由於打算把所有的網路服務都逐步改成docker的方式,所以打算把底層的系統也換成Vmware針對docker等容器特化版的Linux - PhotoOS</p><span id="more"></span><h1 id="Installation"><a href="#Installation" class="headerlink" title="Installation"></a>Installation</h1><ol><li><a href="https://github.com/vmware/photon/wiki/Downloading-Photon-OS">下載Image ISO</a></li><li>然後在VMware workstation或VMware Esxi上建立新的VM(選擇VMware PhotonOS 64 bits或是Linux Kernel最新的64bits都可以)</li><li>用光碟開機後依照步驟做就好了</li></ol><p>基本上這個系統需要的RAM跟空間很小,但是你會需要RAM跟空間來跑Docker.所以在建立的時候請考慮你要使用的服務數量來設定你的RAM跟空間</p><h1 id="Basic-Setup"><a href="#Basic-Setup" class="headerlink" title="Basic Setup"></a>Basic Setup</h1><h2 id="確認基本服務"><a href="#確認基本服務" class="headerlink" title="確認基本服務"></a>確認基本服務</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#看一下基本的系統服務是否有開啟,例如open-vm-tools</span></span><br><span class="line">systemctl status vmtoolsd.service</span><br></pre></td></tr></table></figure><h2 id="帳號設定"><a href="#帳號設定" class="headerlink" title="帳號設定"></a>帳號設定</h2><p>安裝的時候就會設定root密碼了,可以利用useradd再增加一般使用者(為了安全性)</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#增加使用者</span></span><br><span class="line">useradd -m -g root $(your_id)</span><br><span class="line"><span class="comment">#替你的帳號設定密碼</span></span><br><span class="line">passwd $(your_id)</span><br></pre></td></tr></table></figure><p>因為使用上還是很常會需要root權限,所以可以依照個人喜好決定是否要建立額外帳號然後登入後用<code>su</code>或是<code>sudo</code>或是直接修改/etc/ssh/sshd_config改成允許root ssh登入都可以</p><h2 id="網路設定"><a href="#網路設定" class="headerlink" title="網路設定"></a>網路設定</h2><h3 id="Systemd-Networkd"><a href="#Systemd-Networkd" class="headerlink" title="Systemd-Networkd"></a>Systemd-Networkd</h3><h4 id="基本規則"><a href="#基本規則" class="headerlink" title="基本規則"></a>基本規則</h4><p>參考網頁<a href="https://wiki.archlinux.org/title/systemd-networkd">systemd-networkd@ArchWiKi</a></p><p>安裝後的系統預設是dhcp開啟的狀態,若是只要單ip並且有另外的dhcpd加上Mac Address控制的話是可以不用動,有其他需求的需要去修改以下檔案</p><h4 id="關閉DHCP"><a href="#關閉DHCP" class="headerlink" title="關閉DHCP"></a>關閉DHCP</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#/etc/systemd/network/99-dhcp-en.network</span></span><br><span class="line">--------------------------------------------------------------------------------------------------------------------------------</span><br><span class="line">[match]</span><br><span class="line">Name=e*</span><br><span class="line"></span><br><span class="line">[Network]</span><br><span class="line">DHCP=yes<span class="comment">#這個改成no來關閉dhcp</span></span><br><span class="line">IPv6AcceptRA=no</span><br></pre></td></tr></table></figure><h4 id="固定IP設定方法"><a href="#固定IP設定方法" class="headerlink" title="固定IP設定方法"></a>固定IP設定方法</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#/etc/systemd/network/10-static-en.network</span></span><br><span class="line">--------------------------------------------------------------------------------------------------------------------------------</span><br><span class="line">[Match]</span><br><span class="line">Name=ens160<span class="comment">#網卡名稱</span></span><br><span class="line"></span><br><span class="line">[Network]</span><br><span class="line">Address=10.1.10.9/24<span class="comment">#IP位置,可重複多次定義多個IP</span></span><br><span class="line">Gateway=10.1.10.1<span class="comment">#Gateway IP</span></span><br><span class="line">DNS=10.1.10.1<span class="comment">#DNS IP</span></span><br><span class="line"><span class="comment"># NTP設定,用空白隔開不同Server</span></span><br><span class="line">NTP=tock.stdtime.gov.tw watch.stdtime.gov.tw time.stdtime.gov.tw clock.stdtime.gov.tw tick.stdtime.gov.tw</span><br><span class="line"><span class="comment"># 關閉IPV6</span></span><br><span class="line">LinkLocalAddressing=no</span><br><span class="line">IPv6AcceptRA=no</span><br></pre></td></tr></table></figure><h4 id="設定網路介面名稱"><a href="#設定網路介面名稱" class="headerlink" title="設定網路介面名稱"></a>設定網路介面名稱</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#/etc/systemd/network/10-ethusb0.link</span></span><br><span class="line">--------------------------------------------------------------------------------------------------------------------------------</span><br><span class="line">[Match]</span><br><span class="line">MACAddress=00:00:00:00:00:00<span class="comment">#卡號</span></span><br><span class="line"></span><br><span class="line">[Link]</span><br><span class="line">Description=USB to Ethernet Adapter<span class="comment">#這張網路卡的說明</span></span><br><span class="line">Name=ethusb0<span class="comment">#介面名字</span></span><br></pre></td></tr></table></figure><p>想建立多張網卡的話就建立三個檔案分開定義卡號就好了</p><h2 id="升級系統packages"><a href="#升級系統packages" class="headerlink" title="升級系統packages"></a>升級系統packages</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum update</span><br></pre></td></tr></table></figure><h2 id="安裝程式package"><a href="#安裝程式package" class="headerlink" title="安裝程式package"></a>安裝程式package</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install -y vim <span class="comment">#安裝vim</span></span><br></pre></td></tr></table></figure><h2 id="尋找package"><a href="#尋找package" class="headerlink" title="尋找package"></a>尋找package</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum search python <span class="comment">#尋找所有名字裡有python的package</span></span><br></pre></td></tr></table></figure><h2 id="掛載SMB分享的檔案"><a href="#掛載SMB分享的檔案" class="headerlink" title="掛載SMB分享的檔案"></a>掛載SMB分享的檔案</h2><p>基本上會把docker的volume檔案夾先mount上NAS上的備份用資料夾,這樣可以</p><ol><li>簡單備份</li><li>減少PhotonOS的HDD空間需求</li><li>針對某些需要NAS上檔案的docker服務可以直接access</li></ol><p><a href="https://wiki.centos.org/zh-tw/TipsAndTricks/WindowsShares">參考資料</a></p><h3 id="Cifs-utils"><a href="#Cifs-utils" class="headerlink" title="Cifs-utils"></a>Cifs-utils</h3><p>基本上我的音樂檔案都是放在NAS上面,雖然可以透過NFS掛在機器上,但是同理也可以用SMB/Cifs掛載</p><p>在PhotonOS上可以利用yum安裝</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install -y cifs-utils</span><br></pre></td></tr></table></figure><p>然後修改加入</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#/etc/fstab</span></span><br><span class="line">--------------------------------------------------------------------------------------------------------------------------------</span><br><span class="line">\\winbox\getme /mnt/win cifs user,uid=500,rw,noauto,suid,credentials=/root/secret 0 0</span><br></pre></td></tr></table></figure><p>以及</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">/root/secert</span><br><span class="line">--------------------------------------------------------------------------------------------------------------------------------</span><br><span class="line">username=sushi<span class="comment">#SMB ID</span></span><br><span class="line">password=yummy<span class="comment">#SMB ID的Password</span></span><br></pre></td></tr></table></figure><p>記得<code>/root/secert</code>的權限改成0400</p><h3 id="Cifs-utils-autofs"><a href="#Cifs-utils-autofs" class="headerlink" title="Cifs-utils + autofs"></a>Cifs-utils + autofs</h3><p>這個可以自動加卸載</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install -y autofs</span><br></pre></td></tr></table></figure><p>增加到</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#/etc/auto.master</span></span><br><span class="line">--------------------------------------------------------------------------------------------------------------------------------</span><br><span class="line">/mymount /etc/auto.mymount</span><br></pre></td></tr></table></figure><p>然後編輯</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#/etc/auto.mymount</span></span><br><span class="line">--------------------------------------------------------------------------------------------------------------------------------</span><br><span class="line">winbox  -fstype=cifs,rw,noperm,credentials=/root/secret.txt ://winbox/getme</span><br></pre></td></tr></table></figure><p>有任何使用到/mymount的動作就會自動掛上</p><h1 id="Basic-Tools"><a href="#Basic-Tools" class="headerlink" title="Basic Tools"></a>Basic Tools</h1><h3 id="Docker-compose"><a href="#Docker-compose" class="headerlink" title="Docker-compose"></a>Docker-compose</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#安裝python-pip</span></span><br><span class="line">yum install python3-pip</span><br><span class="line"><span class="comment">#安裝docke-compose</span></span><br><span class="line">pip3 install docker-compose</span><br></pre></td></tr></table></figure><h3 id="Docker"><a href="#Docker" class="headerlink" title="Docker"></a>Docker</h3><p>在開始之前,最好先規畫一下各docker的外部儲存資料要怎麼規劃,看是使用docker volume管理</p><p>還是自己建立位置手動管理都可以,因為我後面會用portainer來管理docker,所以使用volume管理的方式應該比較簡單(在GUI看起來的話)</p><h4 id="Portainer-ce"><a href="#Portainer-ce" class="headerlink" title="Portainer-ce"></a>Portainer-ce</h4><p>這是一個web-GUI,用來管理docker的,雖然說可以直接用cli管理就好了,但是有Web-GUI也是很方便的所以就裝了</p><p>他有單機用也可以管理docker-swarm跟 k8s,我沒那麼多node(那堆VPS for v2ray….)所以簡單的單機就可以了</p><p>參考資料<a href="https://documentation.portainer.io/v2.0/deploy/ceinstalldocker/">Portainer Deployment@Docker Hub</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#建立Volume</span></span><br><span class="line">docker volume create portainer_data</span><br><span class="line"><span class="comment">#部屬portainer-ce</span></span><br><span class="line">docker run -d -p 8000:8000 -p 9000:9000 --name=portainer --restart=always -v /var/run/docker.sock:/var/run/docker.sock -v portainer_data:/data portainer/portainer-ce</span><br></pre></td></tr></table></figure><p>這裡可以注意</p><ul><li><p><code>-d</code> 是在背景跑</p></li><li><p><code>-p 8000:8000 -p 9000:9000</code></p><p>這個-p定義可以是 -p <code>主機ip</code> : <code>主機port</code> : <code>container port</code></p></li><li><p><code>--name=</code> 定義你的container要叫什麼名字</p></li><li><p><code>--restart=</code> 定義重新啟動的規則,有</p><ul><li><code>no</code>不重新啟動</li><li><code>on-failure[:最多次數]</code>只有沒有fail才重新啟動,後面的最多次數是最多重試次數</li><li><code>always</code>總是重啟</li><li><code>unless-stopped</code>  除非停止不然都會重啟</li></ul></li><li><p><code>-v /var/run/docker.sock:/var/run/docker.sock -v portainer_data:/data portainer/portainer-ce</code></p><p>這是兩個指令</p><ul><li><p><code>-v /var/run/docker.sock:/var/run/docker.sock</code></p><p>這個是利用-v把系統的/var/run/docker.sock對應到container裡的/var/run/docker.sock,這樣裡面的service就可以抓到外面的docker正在跑的狀態</p></li><li><p><code>-v portainer_data:/data portainer/portainer-ce</code></p></li></ul><p>​       這裡是利用建立好的volume直接使用,若要自己定義位置,也可以就是把前面的部分定義成絕對位置的目錄也可以,然後就是寫入權限要滿足不然寫不進去</p></li></ul><h4 id="Certbot"><a href="#Certbot" class="headerlink" title="Certbot"></a>Certbot</h4><h5 id="Install"><a href="#Install" class="headerlink" title="Install"></a>Install</h5><p>參考<a href="https://certbot.eff.org/docs/install.html#running-with-docker">Certbot的Doc</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo docker run -it --rm --name certbot -v <span class="string">&quot;/etc/letsencrypt:/etc/letsencrypt&quot;</span> -v <span class="string">&quot;/var/lib/letsencrypt:/var/lib/letsencrypt&quot;</span> \</span><br><span class="line">            certbot/certbot certonly</span><br></pre></td></tr></table></figure><p>想要對於指定IP有不同Domain的話可以再加上<code>-p 你要的ip:80:80 -p 你要的ip:443:443</code>這一個參數這樣就可以對應了</p><h5 id="Auto-Renew"><a href="#Auto-Renew" class="headerlink" title="Auto Renew"></a>Auto Renew</h5><p>在crontab裡面加上</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">0 0 * * * docker run --rm -v /etc/letsencrypt:/etc/letsencrypt -ti certbot/certbot renew</span><br></pre></td></tr></table></figure><p>就好了</p>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h1&gt;&lt;p&gt;由於打算把所有的網路服務都逐步改成docker的方式,所以打算把底層的系統也換成Vmware針對docker等容器特化版的Linux - PhotoOS&lt;/p&gt;</summary>
    
    
    
    <category term="VM&amp;Container" scheme="http://kiwi0093.github.io/Wiki-site/categories/VM-Container/"/>
    
    
    <category term="VM" scheme="http://kiwi0093.github.io/Wiki-site/tags/VM/"/>
    
    <category term="Container" scheme="http://kiwi0093.github.io/Wiki-site/tags/Container/"/>
    
  </entry>
  
  <entry>
    <title>Calibre-Web</title>
    <link href="http://kiwi0093.github.io/Wiki-site/wiki/VM&amp;Container/2-calibre-web/"/>
    <id>http://kiwi0093.github.io/Wiki-site/wiki/VM&amp;Container/2-calibre-web/</id>
    <published>2021-07-12T03:11:22.840Z</published>
    <updated>2021-07-12T03:11:22.840Z</updated>
    
    <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>在蘇州的歲月我極度需要電子書（因為不像在台北以前可以買一堆實體書堆在房間）,久了也開始習慣就拿個平板把書都扔進去看,所以一直以來都想弄個電子書管理系統</p><span id="more"></span><h1 id="前置準備"><a href="#前置準備" class="headerlink" title="前置準備"></a>前置準備</h1><h2 id="目錄結構"><a href="#目錄結構" class="headerlink" title="目錄結構"></a>目錄結構</h2><h2 id="建立書本資料庫"><a href="#建立書本資料庫" class="headerlink" title="建立書本資料庫"></a>建立書本資料庫</h2><p>先使用Calibre在NAS上建立書庫</p><h3 id="books"><a href="#books" class="headerlink" title="/books"></a>/books</h3><p>使用cifs-utils把NAS上的 Calibre資料庫掛載在PhotonOS的某個位置</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#/etc/fstab</span></span><br><span class="line">--------------------------------------------------------------------------------------------------------------------------------</span><br><span class="line"><span class="comment">#加上</span></span><br><span class="line">\\$(NAS_IP)\$(Your_dir) /$(where_you_mount) cifs user,uid=$(your_None_root_id),rw,noauto,suid,credentials=/root/secret 0 0</span><br></pre></td></tr></table></figure><h3 id="目錄擁有者與權限"><a href="#目錄擁有者與權限" class="headerlink" title="目錄擁有者與權限"></a>目錄擁有者與權限</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">chmod 755 $(your_Mount_dir)</span><br><span class="line">chown $(your_none_root_id) $(your_mount_dir)</span><br></pre></td></tr></table></figure><h2 id="Volume"><a href="#Volume" class="headerlink" title="Volume"></a>Volume</h2><p>可以把設定檔掛在NAS上面,同上面的方式</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#/etc/fstab</span></span><br><span class="line">--------------------------------------------------------------------------------------------------------------------------------</span><br><span class="line"><span class="comment">#加上</span></span><br><span class="line">\\$(NAS_IP)\$(Your_dir) /var/lib/docker/volumes cifs user,uid=$(your_None_root_id),rw,noauto,suid,credentials=/root/secret 0 0</span><br></pre></td></tr></table></figure><p>然後就不用管了</p><h1 id="Docker-Compose-file"><a href="#Docker-Compose-file" class="headerlink" title="Docker-Compose file"></a>Docker-Compose file</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#calibre-web.yml</span></span><br><span class="line">--------------------------------------------------------------------------------------------------------------------------------</span><br><span class="line">version: <span class="string">&#x27;3&#x27;</span></span><br><span class="line"></span><br><span class="line">services:</span><br><span class="line"></span><br><span class="line">  calibre-web:</span><br><span class="line">    image: technosoft2000/calibre-web</span><br><span class="line">    container_name: calibre-web</span><br><span class="line">    environment:</span><br><span class="line">      - PUID=1000</span><br><span class="line">      - USE_CONFIG_DIR=<span class="literal">true</span></span><br><span class="line">    ports:</span><br><span class="line">      - <span class="variable">$&#123;Your_Calibre-Web-IP&#125;</span>:<span class="variable">$&#123;PORT&#125;</span>:8083</span><br><span class="line">    volumes:</span><br><span class="line">      - /home/docker/books:/books</span><br><span class="line">      - /var/lib/docker/volumes/calibre-app:/calibre-web/app/</span><br><span class="line">      - /var/lib/docker/volumes/calibre-kindle-gen:/calibre-web/kindlegen</span><br><span class="line">      - /var/lib/docker/volumes/calibre-config:/calibre-web/config</span><br><span class="line">    restart: unless-stopped</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="Nginx相關設定"><a href="#Nginx相關設定" class="headerlink" title="Nginx相關設定"></a>Nginx相關設定</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">location /book &#123;</span><br><span class="line"> proxy_bind <span class="variable">$server_addr</span>;</span><br><span class="line"> proxy_pass http://<span class="variable">$&#123;Your_Calibre-Web-IP&#125;</span>:<span class="variable">$&#123;PORT&#125;</span>;</span><br><span class="line"> proxy_set_header Host <span class="variable">$http_host</span>;</span><br><span class="line"> proxy_set_header X-Forwarded-For <span class="variable">$proxy_add_x_forwarded_for</span>;</span><br><span class="line"> proxy_set_header X-Scheme <span class="variable">$scheme</span>;</span><br><span class="line"> proxy_set_header X-Script-Name /book;  <span class="comment"># IMPORTANT: path has NO trailing slash</span></span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure><p>用上述設定放在location這段</p><h1 id="注意事項"><a href="#注意事項" class="headerlink" title="注意事項"></a>注意事項</h1><ul><li>加掛的Books最好是已經用calibre建立好的書庫,管理的時候也可以透過桌面板的calibre來增加書籍</li><li>平時整理書可以用calibre會比Calibre-Web好用</li><li>沒辦法一個帳號對應多個kindle信箱,有多device的人需要建立多個帳號</li></ul>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h1&gt;&lt;p&gt;在蘇州的歲月我極度需要電子書（因為不像在台北以前可以買一堆實體書堆在房間）,久了也開始習慣就拿個平板把書都扔進去看,所以一直以來都想弄個電子書管理系統&lt;/p&gt;</summary>
    
    
    
    <category term="VM&amp;Container" scheme="http://kiwi0093.github.io/Wiki-site/categories/VM-Container/"/>
    
    
    <category term="VM" scheme="http://kiwi0093.github.io/Wiki-site/tags/VM/"/>
    
    <category term="Container" scheme="http://kiwi0093.github.io/Wiki-site/tags/Container/"/>
    
  </entry>
  
  <entry>
    <title>Navidrome</title>
    <link href="http://kiwi0093.github.io/Wiki-site/wiki/VM&amp;Container/3-navidrome/"/>
    <id>http://kiwi0093.github.io/Wiki-site/wiki/VM&amp;Container/3-navidrome/</id>
    <published>2021-07-12T03:11:22.840Z</published>
    <updated>2021-07-12T03:11:22.840Z</updated>
    
    <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>音樂,是很重要的,本來是打算用NAS+Foobar2000來管理與播放我的音樂,但是後面發現其實音樂串流server+Web播放界面似乎更實用所以就挑了一個比較漂亮又輕量級的navidrome來使用</p><span id="more"></span><h1 id="前置準備"><a href="#前置準備" class="headerlink" title="前置準備"></a>前置準備</h1><h2 id="目錄結構"><a href="#目錄結構" class="headerlink" title="目錄結構"></a>目錄結構</h2><h3 id="music"><a href="#music" class="headerlink" title="/music"></a>/music</h3><p>使用cifs-utils把NAS上的音樂資料庫掛載在PhotonOS的某個位置</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#/etc/fstab</span></span><br><span class="line">--------------------------------------------------------------------------------------------------------------------------------</span><br><span class="line"><span class="comment">#加上</span></span><br><span class="line">\\$(NAS_IP)\$(Your_dir) /$(where_you_mount) cifs user,uid=$(your_None_root_id),rw,noauto,suid,credentials=/root/secret 0 0</span><br></pre></td></tr></table></figure><h3 id="目錄擁有者與權限"><a href="#目錄擁有者與權限" class="headerlink" title="目錄擁有者與權限"></a>目錄擁有者與權限</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">chmod 755 $(your_Mount_dir)</span><br><span class="line">chown $(your_none_root_id) $(your_mount_dir)</span><br></pre></td></tr></table></figure><h2 id="Volume"><a href="#Volume" class="headerlink" title="Volume"></a>Volume</h2><p>可以把設定檔掛在NAS上面,同上面的方式</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#/etc/fstab</span></span><br><span class="line">--------------------------------------------------------------------------------------------------------------------------------</span><br><span class="line"><span class="comment">#加上</span></span><br><span class="line">\\$(NAS_IP)\$(Your_dir) /var/lib/docker/volumes cifs user,uid=$(your_None_root_id),rw,noauto,suid,credentials=/root/secret 0 0</span><br></pre></td></tr></table></figure><p>然後就不用管了</p><h1 id="Docker-Compose-file"><a href="#Docker-Compose-file" class="headerlink" title="Docker-Compose file"></a>Docker-Compose file</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#navidrome.yml</span></span><br><span class="line">--------------------------------------------------------------------------------------------------------------------------------</span><br><span class="line">version: <span class="string">&quot;3&quot;</span></span><br><span class="line">services:</span><br><span class="line">  navidrome:</span><br><span class="line">    image: deluan/navidrome:latest</span><br><span class="line">    container_name: navidrome</span><br><span class="line">    ports:</span><br><span class="line">      - <span class="variable">$&#123;Your_navidorme-IP&#125;</span>:<span class="variable">$&#123;PORT&#125;</span>:4533</span><br><span class="line">    environment:</span><br><span class="line">      ND_SCANSCHEDULE: <span class="string">&quot;1h&quot;</span></span><br><span class="line">      ND_LOGLEVEL: <span class="string">&quot;info&quot;</span></span><br><span class="line">      ND_SESSIONTIMEOUT: <span class="string">&quot;24h&quot;</span></span><br><span class="line">      ND_BASEURL: <span class="string">&quot;/music&quot;</span></span><br><span class="line">      ND_ENABLETRANSCODINGCONFIG: <span class="string">&quot;true&quot;</span></span><br><span class="line">      ND_REVERSEPROXYWHITELIST: <span class="string">&quot;0.0.0.0/0&quot;</span></span><br><span class="line">    volumes:</span><br><span class="line">      - /var/lib/docker/volumes/navidrome:/data</span><br><span class="line">      - /home/docker/music:/music:ro</span><br><span class="line">    restart: unless-stopped</span><br></pre></td></tr></table></figure><p>設定的部分,若是想要安全性高就不要加上<code>ND_ENABLETRANSCODINGCONFIG: &quot;true&quot;</code>這個是可以允許使用者直接定義轉碼內容的</p><h1 id="Nginx相關設定"><a href="#Nginx相關設定" class="headerlink" title="Nginx相關設定"></a>Nginx相關設定</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">location /music &#123;</span><br><span class="line">proxy_pass http://<span class="variable">$&#123;Your_navidorme-IP&#125;</span>:<span class="variable">$&#123;PORT&#125;</span>;</span><br><span class="line">proxy_set_header Host <span class="variable">$host</span>;</span><br><span class="line">proxy_set_header X-Real-IP <span class="variable">$remote_addr</span>;</span><br><span class="line">proxy_set_header X-Forwarded-For <span class="variable">$proxy_add_x_forwarded_for</span>;</span><br><span class="line">proxy_set_header X-Forwarded-Proto <span class="variable">$scheme</span>;</span><br><span class="line">proxy_set_header X-Forwarded-Protocol <span class="variable">$scheme</span>;</span><br><span class="line">proxy_set_header X-Forwarded-Host <span class="variable">$http_host</span>;</span><br><span class="line">proxy_buffering off;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>相關設定很簡單照抄就好了</p><h1 id="注意事項"><a href="#注意事項" class="headerlink" title="注意事項"></a>注意事項</h1><ul><li>雖然支援Ultrasonic,但是我自己怎麼試都有問題,一換回subsonic就好了</li></ul>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h1&gt;&lt;p&gt;音樂,是很重要的,本來是打算用NAS+Foobar2000來管理與播放我的音樂,但是後面發現其實音樂串流server+Web播放界面似乎更實用所以就挑了一個比較漂亮又輕量級的navidrome來使用&lt;/p&gt;</summary>
    
    
    
    <category term="VM&amp;Container" scheme="http://kiwi0093.github.io/Wiki-site/categories/VM-Container/"/>
    
    
    <category term="VM" scheme="http://kiwi0093.github.io/Wiki-site/tags/VM/"/>
    
    <category term="Container" scheme="http://kiwi0093.github.io/Wiki-site/tags/Container/"/>
    
  </entry>
  
  <entry>
    <title>librenms</title>
    <link href="http://kiwi0093.github.io/Wiki-site/wiki/VM&amp;Container/4-librenms/"/>
    <id>http://kiwi0093.github.io/Wiki-site/wiki/VM&amp;Container/4-librenms/</id>
    <published>2021-07-12T03:11:22.840Z</published>
    <updated>2021-07-12T03:11:22.840Z</updated>
    
    <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>很久很久以前,我曾經使用過MRTG+SNMP做流量圖表,但是隨著去中國這幾年家裡的Server逐步變成會動就好的超低標準,就沒管了,最近因為大整理所以就想再弄一個類似的,於是挑了Librenms</p><span id="more"></span><h1 id="參考資料"><a href="#參考資料" class="headerlink" title="參考資料"></a>參考資料</h1><p><a href="https://www.dotblogs.com.tw/Mokmoe/2021/04/13/Docker_LibreNMS">莫莫 雜記 - Docker LibreNMS安裝記錄(含MariaDB、PhpMyAdmin)</a></p><p>其實他寫的很詳細,照著做就好了,不過我還是把我稍微調整過的做法寫在下面</p><h1 id="基本做法"><a href="#基本做法" class="headerlink" title="基本做法"></a>基本做法</h1><h2 id="MariaDB"><a href="#MariaDB" class="headerlink" title="MariaDB"></a>MariaDB</h2><ol><li><font size=+1 color=Green><code>vi mariadb.yml</code></font></li></ol><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># mariadb.yml</span></span><br><span class="line"><span class="string">--------------------------------------------------------------------------------------------------------------------------------</span></span><br><span class="line"><span class="attr">version:</span> <span class="string">&#x27;3&#x27;</span></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">mariadb:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">mariadb:latest</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">mariadb</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">MYSQL_ROOT_PASSWORD=$&#123;your_DB_root_Passwd&#125;</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">TZ=Asia/Taipei</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">$&#123;your_DB_host&#125;:$&#123;your_DB_port&#125;:3306</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">/var/lib/docker/volumes/mariadb/data:/var/lib/mysql</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">/var/lib/docker/volumes/mariadb/mariadbcustom.cnf:/etc/mysql/conf.d/custom.cnf</span></span><br><span class="line">    <span class="attr">restart:</span> <span class="string">unless-stopped</span></span><br></pre></td></tr></table></figure><ol start="2"><li><font size=+1 color=Green><code>vi  /var/lib/docker/volumes/mariadb/mariadbcustom.cnf </code></font></li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># /var/lib/docker/volumes/mariadb/mariadbcustom.cnf </span></span><br><span class="line">--------------------------------------------------------------------------------------------------------------------------------</span><br><span class="line">[client]</span><br><span class="line">default-character-set = utf8mb4</span><br><span class="line"></span><br><span class="line">[mysql]<span class="string">&quot; &gt;&gt; /etc/my.cnf</span></span><br><span class="line"><span class="string">default-character-set = utf8mb4</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">[mysqld]</span></span><br><span class="line"><span class="string">skip-character-set-client-handshake</span></span><br><span class="line"><span class="string">collation_server = utf8mb4_unicode_ci</span></span><br><span class="line"><span class="string">character_set_server = utf8mb4</span></span><br><span class="line"><span class="string">tmpdir      = /var/lib/mysqltmp</span></span><br></pre></td></tr></table></figure><p>這個是用來定義MariaDB的預設,都使用utf-8 unicode</p><ol start="3"><li><font size=+1 color=Green><code>sudo docker-compose -f mariadb.yml up -d</code></font></li></ol><p>這個是用來建立container &amp; run</p><ol start="4"><li><font size=+1 color=Green><code>sudo docker exec -it mariadb bash</code></font></li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># @mariadb container</span></span><br><span class="line">--------------------------------------------------------------------------------------------------------------------------------</span><br><span class="line">mysql -u root -p<span class="comment"># 輸入後鍵入你的sql root密碼進入mariadb</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#建立librenms用的帳號,資料庫以及授予這個帳號對這個資料庫的全部權限,不喜歡用指令的人也可以用phpAdmin來進行</span></span><br><span class="line">mysql&gt; CREATE DATABASE librenms CHARACTER SET utf8 COLLATE utf8_unicode_ci;</span><br><span class="line">mysql&gt; CREATE USER <span class="string">&#x27;librenms&#x27;</span>@<span class="string">&#x27;%&#x27;</span> IDENTIFIED BY <span class="string">&#x27;user_librenms_password&#x27;</span>;</span><br><span class="line">mysql&gt; GRANT ALL PRIVILEGES on librenms.* TO <span class="string">&#x27;librenms&#x27;</span>@<span class="string">&#x27;%&#x27;</span> WITH GRANT OPTION;</span><br><span class="line">mysql&gt; FLUSH PRIVILEGES;</span><br></pre></td></tr></table></figure><h2 id="Librenms"><a href="#Librenms" class="headerlink" title="Librenms"></a>Librenms</h2><ol><li><font size=+1 color=Green><code>vi librenms.yml</code></font></li></ol><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#librenms.yml</span></span><br><span class="line"><span class="string">--------------------------------------------------------------------------------------------------------------------------------</span></span><br><span class="line"><span class="attr">version:</span> <span class="string">&#x27;3&#x27;</span></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">librenms:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">librenms/librenms:latest</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">librenms</span></span><br><span class="line">    <span class="attr">command:</span> <span class="string">su</span> <span class="bullet">-</span> <span class="string">librenms</span> <span class="string">-c</span> <span class="string">&quot;/opt/librenms/librenms-service.py -v&quot;</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">TZ=Asia/Taipei</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">PUID=1000</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">DB_HOST=$&#123;your_DB_host&#125;</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">DB_PORT=$&#123;your_DB_port&#125;</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">DB_NAME=librenms</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">DB_USER=librenms</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">DB_PASSWORD=user_librenms_passwd</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">DB_TIMEOUT=10</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">LIBRENMS_SNMP_COMMUNITY=$&#123;Community_name_you_want&#125;</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">$&#123;your_Server_ip&#125;:$&#123;port_you_want&#125;:8000</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">/var/lib/docker/volumes/librenms/data:/data</span></span><br><span class="line">    <span class="attr">restart:</span> <span class="string">always</span></span><br></pre></td></tr></table></figure><p>這裡有個關鍵的一步就是務必要加上</p><p><font size=+2 color=blue><code>command: su - librenms -c "/opt/librenms/librenms-service.py -v"</code></font></p><p>這個的意思是以<font color=blue>librenms</font>這個帳號執行<font color=blue><code>/opt/librenms/librenms-service.py -v</code></font></p><p>這樣他的rrd權限才會正確,不然會有問題(我之前就是信了這是optional所以一直弄不好,這個是必要條件…)</p><ol start="2"><li><font size=+1 color=Green><code>sudo docker exec -it mariadb bash</code></font></li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">#進入mariadb container</span></span><br><span class="line">--------------------------------------------------------------------------------------------------------------------------------</span><br><span class="line">mysql -u librenms -p<span class="comment">#以librenms帳號登入mariadb</span></span><br><span class="line"></span><br><span class="line">mysql&gt; use librenms;<span class="comment">#使用librenms資料庫</span></span><br><span class="line"><span class="comment">#修改資料庫資料</span></span><br><span class="line">mysql&gt; ALTER TABLE `notifications` CHANGE `datetime` `datetime` timestamp NOT NULL DEFAULT <span class="string">&#x27;1970-01-02 00:00:00&#x27;</span> ; </span><br><span class="line">mysql&gt; ALTER TABLE `users` CHANGE `created_at` `created_at` timestamp NOT NULL DEFAULT <span class="string">&#x27;1970-01-02 00:00:01&#x27;</span> ;</span><br></pre></td></tr></table></figure><p>這個是修正database issue(Validata Config裡的問題修正)</p><h2 id="同場加映-phpAdmin"><a href="#同場加映-phpAdmin" class="headerlink" title="同場加映 - phpAdmin"></a>同場加映 - phpAdmin</h2><p>這個玩意老實說用不太到,但是針對不喜歡mysql指令的人可以用這個圖形介面來操作mysql database</p><p>因為他很單純,所以直接用<code>docker run</code>指令建立就可以了</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 若你的$&#123;your_DB_host&#125;=3306</span></span><br><span class="line">sudo docker run --name phpmyadmin -d -e PMA_HOST=<span class="variable">$&#123;your_DB_host&#125;</span> -p 8080:80 phpmyadmin/phpmyadmin</span><br><span class="line"></span><br><span class="line"><span class="comment"># 若你的$&#123;your_DB_host&#125;不是預設的3306,建議用docker --link來連結</span></span><br><span class="line">sudo docker run --name phpmyadmin -d --link mariadb:db -p 8080:80 phpmyadmin/phpmyadmin</span><br></pre></td></tr></table></figure><p>這裡的8080port是對外的可以改成你想要的</p><h2 id="Nginx設定"><a href="#Nginx設定" class="headerlink" title="Nginx設定"></a>Nginx設定</h2><p>老實說,要改成子目錄的方式,得去修改container內的config.php我覺得這個太麻煩了,所以我就跑去再申請一個DN專門來用</p><p>Nginx的設定就是普通的virtual host設定法,只要在`/etc/nginx/site-enables/後面再加上一個cnf檔定義一下就好了</p><p>記得要另外申請一下certbot的憑證給這個 DN使用</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># librenms.cnf</span></span><br><span class="line">--------------------------------------------------------------------------------------------------------------------------------</span><br><span class="line">server &#123;</span><br><span class="line"> listen 80;</span><br><span class="line"> server_name librenms.exsample.com;</span><br><span class="line"> <span class="built_in">return</span> 301 https://$server_name<span class="variable">$request_uri</span>;</span><br><span class="line">&#125;</span><br><span class="line">server &#123;</span><br><span class="line"> listen 443 ssl http2;</span><br><span class="line"> server_name librenms.exsample.com;</span><br><span class="line"></span><br><span class="line"> ssl_certificate /etc/letsencrypt/live/librenms.exsample.com/fullchain.pem;</span><br><span class="line"> ssl_certificate_key /etc/letsencrypt/live/librenms.exsample.com/privkey.pem;</span><br><span class="line"><span class="comment"># include /etc/letsencrypt/options-ssl-nginx.conf;</span></span><br><span class="line"><span class="comment"># ssl_dhparam /etc/letsencrypt/ssl-dhparams.pem;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#charset koi8-r;</span></span><br><span class="line"> <span class="comment">#access_log /var/log/nginx/host.access.log main;</span></span><br><span class="line"></span><br><span class="line">client_max_body_size 20M;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">location / &#123;</span><br><span class="line"> proxy_pass http://<span class="variable">$&#123;your_Server_ip&#125;</span>:<span class="variable">$&#123;port_you_want&#125;</span>;<span class="comment">#這裡改成要轉發的ip/port</span></span><br><span class="line"> proxy_set_header Host <span class="variable">$host</span>;</span><br><span class="line"> proxy_set_header X-Real-IP <span class="variable">$remote_addr</span>;</span><br><span class="line"> proxy_set_header X-Forwarded-For <span class="variable">$proxy_add_x_forwarded_for</span>;</span><br><span class="line"> proxy_set_header X-Forwarded-Proto <span class="variable">$scheme</span>;</span><br><span class="line"> proxy_set_header X-Forwarded-Protocol <span class="variable">$scheme</span>;</span><br><span class="line"> proxy_set_header X-Forwarded-Host <span class="variable">$http_host</span>;</span><br><span class="line"> proxy_buffering off;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">error_page 500 502 503 504 /50x.html;</span><br><span class="line"> location = /50x.html &#123;</span><br><span class="line"> root /usr/share/nginx/html;</span><br></pre></td></tr></table></figure><h1 id="SNMP-for-clients"><a href="#SNMP-for-clients" class="headerlink" title="SNMP for clients"></a>SNMP for clients</h1><h2 id="FreeBSD"><a href="#FreeBSD" class="headerlink" title="FreeBSD"></a>FreeBSD</h2><p>請參考Wiki的 FreeBSD Section</p><h2 id="VMware-ESXi-6-5"><a href="#VMware-ESXi-6-5" class="headerlink" title="VMware ESXi 6.5"></a>VMware ESXi 6.5</h2><h3 id="參考資料-1"><a href="#參考資料-1" class="headerlink" title="參考資料"></a>參考資料</h3><p><a href="https://blog.xuite.net/tolarku/blog/465843932-ESXi+%E9%96%8B%E5%95%9F%E8%88%87%E8%A8%AD%E5%AE%9A+SNMP+">黃昏的甘蔗</a></p><p><a href="https://sc8log.blogspot.com/2016/12/esxi-snmp.html">天黑的時候星星就會出現</a></p><ol><li><font size=+1 color=Green><code>ssh登入Esxi後</code></font></li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">esxcli system snmp get<span class="comment"># 確認snmp狀態與設定值</span></span><br><span class="line">esxcli system snmp <span class="built_in">set</span> -c YOUR_STRING<span class="comment"># 設定你的community</span></span><br><span class="line">esxcli system snmp <span class="built_in">set</span> -p 161<span class="comment"># 設定你的snmp port,基本上都是使用161 udp</span></span><br><span class="line">esxcli system snmp <span class="built_in">set</span> -L <span class="string">&quot;City, State, Country&quot;</span><span class="comment"># 設定你的Location</span></span><br><span class="line">esxcli system snmp <span class="built_in">set</span> -C noc@example.com<span class="comment"># 設定你的聯絡人</span></span><br><span class="line">esxcli system snmp <span class="built_in">set</span> -e yes<span class="comment"># 設定啟用</span></span><br></pre></td></tr></table></figure><ol start="2"><li><font size=+1 color=Green>到其他可以讀snmp的機器上執行<code>snmpwalk -v2c -c $&#123;YOUR_STRING&#125; $&#123;your_server_IP&#125;</code></font> </li></ol><p>確認有沒有資料就好了</p><h1 id="結論"><a href="#結論" class="headerlink" title="結論"></a>結論</h1><ul><li>Community若不想修改librenms內的 config.php的話建議不要用public以外的字串,這樣找起來比較方便</li><li>這些要開啟後至少幾個小時後才會有明顯的圖示,不要太緊張,也沒辦法一設好就馬上有資料</li></ul>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h1&gt;&lt;p&gt;很久很久以前,我曾經使用過MRTG+SNMP做流量圖表,但是隨著去中國這幾年家裡的Server逐步變成會動就好的超低標準,就沒管了,最近因為大整理所以就想再弄一個類似的,於是挑了Librenms&lt;/p&gt;</summary>
    
    
    
    <category term="VM&amp;Container" scheme="http://kiwi0093.github.io/Wiki-site/categories/VM-Container/"/>
    
    
    <category term="FreeBSD" scheme="http://kiwi0093.github.io/Wiki-site/tags/FreeBSD/"/>
    
    <category term="VM" scheme="http://kiwi0093.github.io/Wiki-site/tags/VM/"/>
    
    <category term="Container" scheme="http://kiwi0093.github.io/Wiki-site/tags/Container/"/>
    
  </entry>
  
  <entry>
    <title>Next Theme的安裝與設定</title>
    <link href="http://kiwi0093.github.io/Wiki-site/wiki/Network/Hexo/5-Next_theme/"/>
    <id>http://kiwi0093.github.io/Wiki-site/wiki/Network/Hexo/5-Next_theme/</id>
    <published>2021-07-12T03:11:22.840Z</published>
    <updated>2021-07-12T03:11:22.840Z</updated>
    
    <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>Next主題是一個很漂亮的Blog主題/風格,安裝起來也非常簡單用npm直接下指令安裝就好了</p><span id="more"></span><h3 id="安裝"><a href="#安裝" class="headerlink" title="安裝"></a>安裝</h3><p><a href="https://github.com/next-theme/hexo-theme-next">Next Theme官網</a>上有兩種安裝方式</p><ul><li><p>透過npm直接安裝(需要Hexo5.0以上版本)</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#在Hexo目錄下</span></span><br><span class="line">npm install hexo-theme-next</span><br></pre></td></tr></table></figure><p>安裝後直接變更Hexo目錄的<code>_config.yml</code>內的theme部分就可以用了</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">theme: next</span><br></pre></td></tr></table></figure></li><li><p>透過Git指令直接clone整個theme到Hexo的theme目錄</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#在Hexo目錄下</span></span><br><span class="line">git <span class="built_in">clone</span> https://github.com/next-theme/hexo-theme-next themes/next</span><br></pre></td></tr></table></figure><p>安裝後一樣要變更Hexo目錄的<code>_config.yml</code></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">theme: next</span><br></pre></td></tr></table></figure></li></ul><h3 id="設定"><a href="#設定" class="headerlink" title="設定"></a>設定</h3><h6 id="Theme-Setting"><a href="#Theme-Setting" class="headerlink" title="#Theme Setting"></a>#Theme Setting</h6><p>將Theme的<code>_config.yml</code>複製為<code>_config.[Theme_name].yml</code></p><p>詳細的說明可以參考<a href="https://theme-next.js.org/docs/getting-started/configuration.html">官方的文件說明</a></p><p>基本上只需要修改下述幾個主要參數就可以了</p><h5 id="Choosing-Scheme"><a href="#Choosing-Scheme" class="headerlink" title="#Choosing Scheme"></a>#Choosing Scheme</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"># ---------------------------------------------------------------</span><br><span class="line"># Scheme Settings</span><br><span class="line"># ---------------------------------------------------------------</span><br><span class="line"></span><br><span class="line"># Schemes</span><br><span class="line">#scheme: Muse</span><br><span class="line">scheme: Mist</span><br><span class="line">#scheme: Pisces</span><br><span class="line">#scheme: Gemini</span><br><span class="line"></span><br><span class="line"># Dark Mode</span><br><span class="line">darkmode: true</span><br></pre></td></tr></table></figure><p>有四種scheme可以挑選,官網上有範例可以參考<a href="https://theme-next.js.org/muse/">Muse</a>, <a href="https://theme-next.js.org/mist/">Mist</a>, <a href="https://theme-next.js.org/pisces/">Pisces</a>, <a href="https://theme-next.js.org/">Gemini</a>可以自行挑選後修改設定啟用</p><p>另外現在Next官方支援Darkmode,預設是false,修改成true後可以變成darkmode</p><h5 id="Menu"><a href="#Menu" class="headerlink" title="#Menu"></a>#Menu</h5><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"># ---------------------------------------------------------------</span><br><span class="line"># Menu Settings</span><br><span class="line"># ---------------------------------------------------------------</span><br><span class="line"></span><br><span class="line">menu:</span><br><span class="line">  home: / || fa fa-home</span><br><span class="line">  <span class="meta">#about: /about/ || fa fa-user</span></span><br><span class="line">  tags: /tags/ || fa fa-tags</span><br><span class="line">  categories: /categories/ || fa fa-th</span><br><span class="line">  archives: /archives/ || fa fa-archive</span><br><span class="line">  <span class="meta">#schedule: /schedule/ || fa fa-calendar</span></span><br><span class="line">  <span class="meta">#sitemap: /sitemap.xml || fa fa-sitemap</span></span><br><span class="line">  <span class="meta">#commonweal: /404/ || fa fa-heartbeat</span></span><br><span class="line">  wiki: https:<span class="comment">//kiwi0093.github.io/Wiki-site/ || fa fa-sitemap</span></span><br><span class="line"></span><br><span class="line"># Enable / Disable menu icons / item badges.</span><br><span class="line">menu_settings:</span><br><span class="line">  icons: <span class="literal">true</span></span><br><span class="line">  badges: <span class="literal">false</span></span><br></pre></td></tr></table></figure><p>編輯這個部分可以簡易做出Blog框架內的選單,在官方文件內還有介紹出可以分層的Menu寫法,如下</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">menu:</span><br><span class="line">  home: / || fa fa-home</span><br><span class="line">  archives: /archives/ || fa fa-archive</span><br><span class="line">  Docs:</span><br><span class="line">    <span class="keyword">default</span>: /docs/ || fa fa-book</span><br><span class="line">    Getting Started:</span><br><span class="line">      <span class="keyword">default</span>: /getting-started/ || fa fa-flag</span><br><span class="line">      Installation: /installation.html || fa fa-download</span><br><span class="line">      Configuration: /configuration.html || fa fa-wrench</span><br><span class="line">    Third Party Services:</span><br><span class="line">      <span class="keyword">default</span>: /third-party-services/ || fa fa-puzzle-piece</span><br><span class="line">      Math Equations: /math-equations.html || fa fa-square-root-alt</span><br><span class="line">      Comment Systems: /comments.html || fa fa-comment-alt</span><br></pre></td></tr></table></figure><p>其他的細部設定就參考官方文件設定即可</p><p>在現在的架構下務必要加上</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wiki: https:<span class="comment">//kiwi0093.github.io/Wiki-site/ || fa fa-sitemap</span></span><br></pre></td></tr></table></figure><p>才會建立Wiki的Link</p>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h1&gt;&lt;p&gt;Next主題是一個很漂亮的Blog主題/風格,安裝起來也非常簡單用npm直接下指令安裝就好了&lt;/p&gt;</summary>
    
    
    
    <category term="Network" scheme="http://kiwi0093.github.io/Wiki-site/categories/Network/"/>
    
    <category term="Hexo" scheme="http://kiwi0093.github.io/Wiki-site/categories/Network/Hexo/"/>
    
    
    <category term="Network" scheme="http://kiwi0093.github.io/Wiki-site/tags/Network/"/>
    
    <category term="Server" scheme="http://kiwi0093.github.io/Wiki-site/tags/Server/"/>
    
    <category term="Git" scheme="http://kiwi0093.github.io/Wiki-site/tags/Git/"/>
    
    <category term="Blog" scheme="http://kiwi0093.github.io/Wiki-site/tags/Blog/"/>
    
  </entry>
  
  <entry>
    <title>Wikitten Theme的安裝與設定</title>
    <link href="http://kiwi0093.github.io/Wiki-site/wiki/Network/Hexo/6-Wikitten_theme/"/>
    <id>http://kiwi0093.github.io/Wiki-site/wiki/Network/Hexo/6-Wikitten_theme/</id>
    <published>2021-07-12T03:11:22.840Z</published>
    <updated>2021-07-12T03:11:22.840Z</updated>
    
    <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>這是我這個Wiki站的主體框架,除了一部分的配色我會自己改一下以外其他部份都原汁原味</p><span id="more"></span><h3 id="安裝"><a href="#安裝" class="headerlink" title="安裝"></a>安裝</h3><p>這個Theme安裝相較之下就簡單很多,只有<code>git clone</code>的安裝方法</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#在Hexo目錄下</span></span><br><span class="line">git <span class="built_in">clone</span> https://github.com/zthxxx/hexo-theme-Wikitten.git themes/Wikitten</span><br></pre></td></tr></table></figure><p>複製以下檔案</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cp -rf themes/Wikitten/_source/* <span class="built_in">source</span>/</span><br><span class="line">cp -rf themes/Wikitten/_scaffolds/* scaffolds/</span><br><span class="line">cp -f themes/Wikitten/_config.yml.example _config.Wikitten.yml</span><br></pre></td></tr></table></figure><p>安裝以下Plugin</p><ul><li>hexo-autonofollow        // 打开非本站链接时自动开启新标签页</li><li>hexo-directory-category // 根据文章文件目录自动为文章添加分类</li><li>hexo-generator-feed        // 生成 RSS 源</li><li>hexo-generator-json-content    // 生成全站文章 json 内容，用于全文搜索</li><li>hexo-generator-sitemap    // 生成全站站点地图 sitemap</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i -S hexo-autonofollow hexo-directory-category hexo-generator-feed hexo-generator-json-content hexo-generator-sitemap</span><br></pre></td></tr></table></figure><p>修改<code>_config.yml</code></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">theme: Wikitten</span><br></pre></td></tr></table></figure><h3 id="設定"><a href="#設定" class="headerlink" title="設定"></a>設定</h3><h4 id="Hexo本體"><a href="#Hexo本體" class="headerlink" title="Hexo本體"></a>Hexo本體</h4><p>依照原始架構設想,Wiki會被另外裝到<code>Wiki-site</code>裡面,所以<code>_config.yml</code>內屬於Wiki的有一部分要修改</p><h4 id="Site-amp-URL"><a href="#Site-amp-URL" class="headerlink" title="#Site &amp; URL"></a>#Site &amp; URL</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"># Site</span><br><span class="line">title: Kiwi<span class="number">&#x27;</span>s Wiki</span><br><span class="line">subtitle: </span><br><span class="line">description: <span class="string">&#x27;&#x27;</span></span><br><span class="line"><span class="string">keywords:</span></span><br><span class="line"><span class="string">author: Kiwi</span></span><br><span class="line"><span class="string">language: en</span></span><br><span class="line"><span class="string">timezone: &#x27;</span>&#x27;</span><br><span class="line"></span><br><span class="line"># URL</span><br><span class="line">## If your site is put in a subdirectory, <span class="built_in">set</span> url as <span class="string">&#x27;http://example.com/child&#x27;</span> <span class="keyword">and</span> root as <span class="string">&#x27;/child/&#x27;</span></span><br><span class="line">url: http:<span class="comment">//Kiwi0093.github.io/Wiki-site</span></span><br><span class="line">root: /Wiki-site</span><br><span class="line">permalink: wiki/:title/</span><br><span class="line">permalink_defaults:</span><br><span class="line">pretty_urls:</span><br><span class="line">  trailing_index: <span class="literal">true</span> # Set to <span class="literal">false</span> to remove trailing <span class="string">&#x27;index.html&#x27;</span> from permalinks</span><br><span class="line">  trailing_html: <span class="literal">true</span> # Set to <span class="literal">false</span> to remove trailing <span class="string">&#x27;.html&#x27;</span> from permalinks</span><br></pre></td></tr></table></figure><p>因為是Wiki-Site,所以root部分要變更為<code>/Wiki-site</code>,並且將permalink修改為<code>wiki/:title/</code></p><h4 id="目錄"><a href="#目錄" class="headerlink" title="#目錄"></a>#目錄</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"># Directory</span><br><span class="line">source_dir: source</span><br><span class="line">public_dir: <span class="keyword">public</span></span><br><span class="line">tag_dir: tags</span><br><span class="line">archive_dir: archives</span><br><span class="line">category_dir: categories</span><br><span class="line">code_dir: downloads/code</span><br><span class="line">i18n_dir: :lang</span><br><span class="line">skip_render:</span><br><span class="line">  - README.md</span><br><span class="line">  - <span class="string">&#x27;_posts/**/embed_page/**&#x27;</span></span><br></pre></td></tr></table></figure><p>在<code>skip_render</code>後加上</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">- README.md</span><br><span class="line">- <span class="string">&#x27;_posts/**/embed_page/**&#x27;</span></span><br></pre></td></tr></table></figure><h4 id="theme-amp-deploy"><a href="#theme-amp-deploy" class="headerlink" title="#theme &amp; deploy"></a>#theme &amp; deploy</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"># Extensions</span><br><span class="line">## Plugins: https:<span class="comment">//hexo.io/plugins/</span></span><br><span class="line">## Themes: https:<span class="comment">//hexo.io/themes/</span></span><br><span class="line">theme: Wikitten</span><br><span class="line"></span><br><span class="line"># Deployment</span><br><span class="line">## Docs: https:<span class="comment">//hexo.io/docs/one-command-deployment</span></span><br><span class="line">deploy:</span><br><span class="line">  type: git</span><br><span class="line">  repo: https:<span class="comment">//github.com/Kiwi0093/Wiki-site</span></span><br><span class="line">  branch: gh-pages</span><br></pre></td></tr></table></figure><p>deploy的部分需要把branch改成<code>gh-pages</code>確保網頁會到<a href="https://kiwi0093.github.io/Wiki-site/">https://kiwi0093.github.io/Wiki-site/</a></p><h4 id="Wikitten主題設定"><a href="#Wikitten主題設定" class="headerlink" title="Wikitten主題設定"></a>Wikitten主題設定</h4><h5 id="Menu"><a href="#Menu" class="headerlink" title="#Menu"></a>#Menu</h5><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># Menus</span><br><span class="line">menu:</span><br><span class="line">  首頁: /</span><br><span class="line">  歸檔: /archives</span><br><span class="line">  分類: /categories</span><br><span class="line">  標籤: /tags</span><br><span class="line">  關於: /about</span><br><span class="line">  Blog : https:<span class="comment">//Kiwi0093.github.io</span></span><br></pre></td></tr></table></figure><p>記得加上<code>Blog : https://Kiwi0093.github.io</code>確保Wiki頁面上有連回Blog的連結</p><h5 id="Customize"><a href="#Customize" class="headerlink" title="#Customize"></a>#Customize</h5><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"># Customize</span><br><span class="line">customize:</span><br><span class="line">    logo:</span><br><span class="line">        enabled: <span class="literal">true</span></span><br><span class="line">        width: <span class="number">40</span></span><br><span class="line">        height: <span class="number">40</span></span><br><span class="line">        url: /logo.png</span><br><span class="line">    profile:</span><br><span class="line">        enabled: <span class="literal">false</span> # Whether to show profile bar</span><br><span class="line">        avatar: <span class="meta"># css/images/avatar.png</span></span><br><span class="line">        gravatar: Kiwi@kaienroid.com # Gravatar email address, <span class="keyword">if</span> you enable Gravatar, your avatar config will be overriden</span><br><span class="line">        author: Kiwi</span><br><span class="line">        author_title: Designer &amp; Programmer</span><br><span class="line">        location: Taipei, Taiwan</span><br><span class="line">        follow: https:<span class="comment">//github.com/Kiwi0093/</span></span><br><span class="line">    highlight: monokai</span><br><span class="line">    sidebar: left <span class="meta"># sidebar position, options: left, right</span></span><br><span class="line">    category_perExpand: <span class="literal">false</span> <span class="meta"># enable article categories list per expanding</span></span><br><span class="line">    thumbnail: <span class="literal">true</span> <span class="meta"># enable posts thumbnail, options: true, false</span></span><br><span class="line">    favicon: /favicon.ico <span class="meta"># path to favicon</span></span><br><span class="line">    default_index_file: index.md <span class="meta"># <span class="meta-keyword">if</span> this, it will display at site index instead of default index page</span></span><br><span class="line">    social_links:</span><br><span class="line">        github: https:<span class="comment">//github.com/Kiwi0093/Kiwi0093.github.io</span></span><br><span class="line">        rss: /atom.xml</span><br><span class="line">    social_link_tooltip: <span class="literal">true</span> <span class="meta"># enable the social link tooltip, options: true, false</span></span><br></pre></td></tr></table></figure><p>這個部分主要是設定框架</p><h5 id="Widget"><a href="#Widget" class="headerlink" title="#Widget"></a>#Widget</h5><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># Widgets</span><br><span class="line">widgets: <span class="meta"># default use category only</span></span><br><span class="line">    - category</span><br><span class="line">    # - recent_posts</span><br><span class="line">    # - archive</span><br><span class="line">    # - tag</span><br><span class="line">    # - tagcloud</span><br><span class="line">    # - links</span><br></pre></td></tr></table></figure><p>這個可以設定有哪些會列出來在左右側的框架內</p><h5 id="歷史版本確認"><a href="#歷史版本確認" class="headerlink" title="#歷史版本確認"></a>#歷史版本確認</h5><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># History version </span><br><span class="line">history_control: <span class="meta"># make you wiki has history version control in page</span></span><br><span class="line">    enable: <span class="literal">true</span></span><br><span class="line">    server_link: https:<span class="comment">//github.com # recommend use GitHub https://github.com</span></span><br><span class="line">    user: Kiwi0093</span><br><span class="line">    repertory: Wiki-site</span><br><span class="line">    branch: master</span><br></pre></td></tr></table></figure><p>這部分可以讓Wiki的歷史版本直接跟github的版本控制連動</p><h3 id="變更顏色"><a href="#變更顏色" class="headerlink" title="變更顏色"></a>變更顏色</h3><p><code>themes/Wikitten/source/css/_variables.styl</code></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Colors</span></span><br><span class="line">color-<span class="keyword">default</span> = #<span class="number">565</span>a5f</span><br><span class="line">color-grey = #<span class="number">999</span></span><br><span class="line">color-border = #dfe1e2</span><br><span class="line">color-border-stretch = #c1cfdc</span><br><span class="line">color-link = #eb783b <span class="comment">//#38b7ea</span></span><br><span class="line">color-background = #ebeef1</span><br><span class="line">color-meta-head = #<span class="number">7b</span>848c</span><br><span class="line">color-sidebar-text = #<span class="number">777</span></span><br><span class="line">color-sidebar-text-dark = #<span class="number">333</span></span><br><span class="line">color-widget-background = <span class="meta">#ddd</span></span><br><span class="line">color-widget-border = <span class="meta">#ccc</span></span><br></pre></td></tr></table></figure><p>個人會把Link的顏色從藍色<code>#38b7ea</code>變更為橘色<code>#eb783b</code></p><p>顏色的選擇可以使用google查詢任意一個顏色的HEX code,就會有google的小工具可以使用了</p><p><img src="https://raw.githubusercontent.com/Kiwi0093/graph/master/img/google_color.PNG" alt="google_color"></p><h3 id="參考資料"><a href="#參考資料" class="headerlink" title="參考資料"></a>參考資料</h3><p><a href="http://www.lzszy.com/wiki/2018-12-16-Hexo%E5%8D%9A%E5%AE%A2%E4%B8%AD%E4%BD%BF%E7%94%A8Wikitten%E4%B8%BB%E9%A2%98/">A Learning Blog</a></p><p><a href="https://wiki.zthxxx.me/">Theme作者Zthxxx’s Wiki</a></p><p><a href="https://github.com/zthxxx/hexo-theme-Wikitten">Theme Wiki</a></p>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h1&gt;&lt;p&gt;這是我這個Wiki站的主體框架,除了一部分的配色我會自己改一下以外其他部份都原汁原味&lt;/p&gt;</summary>
    
    
    
    <category term="Network" scheme="http://kiwi0093.github.io/Wiki-site/categories/Network/"/>
    
    <category term="Hexo" scheme="http://kiwi0093.github.io/Wiki-site/categories/Network/Hexo/"/>
    
    
    <category term="Network" scheme="http://kiwi0093.github.io/Wiki-site/tags/Network/"/>
    
    <category term="Server" scheme="http://kiwi0093.github.io/Wiki-site/tags/Server/"/>
    
    <category term="Git" scheme="http://kiwi0093.github.io/Wiki-site/tags/Git/"/>
    
    <category term="Wiki" scheme="http://kiwi0093.github.io/Wiki-site/tags/Wiki/"/>
    
  </entry>
  
  <entry>
    <title>Markdown語法</title>
    <link href="http://kiwi0093.github.io/Wiki-site/wiki/Misc/1-Markdown&amp;Hexo/"/>
    <id>http://kiwi0093.github.io/Wiki-site/wiki/Misc/1-Markdown&amp;Hexo/</id>
    <published>2021-07-12T03:11:22.837Z</published>
    <updated>2021-07-12T03:11:22.837Z</updated>
    
    <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>很久以前當我剛開始寫Blog的時候,<del>曾經把我常用的語法整理過一遍</del>(找不到了),但是最近看到一些騷操作就想拿出來獨立整理一篇</p><span id="more"></span><h1 id="基本使用"><a href="#基本使用" class="headerlink" title="基本使用"></a>基本使用</h1><p>基本使用的部分基本上Typora都有對應的選項或是快速鍵可以使用,所以就大概記一下就好了</p><h2 id="標題文字"><a href="#標題文字" class="headerlink" title="#標題文字"></a><code>#</code>標題文字</h2><p>基本上就是</p><h1 id="H1-標題"><a href="#H1-標題" class="headerlink" title="# H1 標題"></a><code>#</code> H1 標題</h1><h2 id="H2-標題"><a href="#H2-標題" class="headerlink" title="## H2 標題"></a><code>##</code> H2 標題</h2><h3 id="H3-標題"><a href="#H3-標題" class="headerlink" title="### H3 標題"></a><code>###</code> H3 標題</h3><h4 id="H4-標題"><a href="#H4-標題" class="headerlink" title="#### H4 標題"></a><code>####</code> H4 標題</h4><h5 id="H5-標題"><a href="#H5-標題" class="headerlink" title="##### H5 標題"></a><code>#####</code> H5 標題</h5><h6 id="H6-標題"><a href="#H6-標題" class="headerlink" title="###### H6 標題"></a><code>######</code> H6 標題</h6><p>從H1~H6共有六種尺寸,算是使用Markdown語法時最常用的</p><h2 id="分隔線"><a href="#分隔線" class="headerlink" title="分隔線"></a>分隔線</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">***</span><br><span class="line">+++</span><br></pre></td></tr></table></figure><p>效果</p><hr><h2 id="連結"><a href="#連結" class="headerlink" title="連結"></a>連結</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[標題](http網址)</span><br></pre></td></tr></table></figure><p>效果</p><p><a href="https://kiwi0093.github.io/Wiki-site/" title="說明文字">Kiwi’s Wiki</a> </p><h2 id="文字效果"><a href="#文字效果" class="headerlink" title="文字效果"></a>文字效果</h2><table><thead><tr><th align="center">語法1</th><th align="center">語法2</th><th align="center">效果</th></tr></thead><tbody><tr><td align="center">*斜體*</td><td align="center">_斜體_</td><td align="center"><em>斜體</em></td></tr><tr><td align="center">*<em>粗體*</em></td><td align="center">_<em>粗體_</em></td><td align="center"><strong>粗體</strong></td></tr><tr><td align="center">*<strong>粗斜體*</strong></td><td align="center">_<strong>粗斜體_</strong></td><td align="center"><em><strong>粗斜體</strong></em></td></tr><tr><td align="center">~~刪除~~</td><td align="center"></td><td align="center"><del>刪除</del></td></tr></tbody></table><h2 id="清單"><a href="#清單" class="headerlink" title="清單"></a>清單</h2><h3 id="無序清單"><a href="#無序清單" class="headerlink" title="無序清單"></a>無序清單</h3><p>語法</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">* 第一項</span><br><span class="line">* 第二項</span><br><span class="line">* 第三項</span><br></pre></td></tr></table></figure><p>效果</p><ul><li>第一項</li><li>第二項</li><li>第三項</li></ul><p>* &amp; - &amp; + 都是一樣的</p><h3 id="有序清單"><a href="#有序清單" class="headerlink" title="有序清單"></a>有序清單</h3><p>語法</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1. 第一項</span><br><span class="line">2. 第二項</span><br><span class="line">3. 第三項</span><br></pre></td></tr></table></figure><p>效果</p><ol><li>第一項</li><li>第二項</li><li>第三項</li></ol><p>順序顛倒也沒關係會自動排序</p><h2 id="圖片或是影音連結"><a href="#圖片或是影音連結" class="headerlink" title="圖片或是影音連結"></a>圖片或是影音連結</h2><p>語法</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#一般圖片連結</span><br><span class="line">![Alt text](/path/to/img.jpg)</span><br><span class="line">#youtube連結</span><br><span class="line">[![Dr.Berg的斷食說明](http://img.youtube.com/vi/SlzBMJvtGHo/0.jpg)](https://www.youtube.com/watch?v=SlzBMJvtGHo &quot;斷食體內變化&quot;)</span><br></pre></td></tr></table></figure><p>效果(如youtube範例)</p><p><a href="https://www.youtube.com/watch?v=SlzBMJvtGHo" title="斷食體內變化"><img src="http://img.youtube.com/vi/SlzBMJvtGHo/0.jpg" alt="Dr.Berg的斷食說明"></a></p><h1 id="進階使用"><a href="#進階使用" class="headerlink" title="進階使用"></a>進階使用</h1><p>基本上就是利用HTML的語法直接使用,markdown可以直接使用html語法,在&lt;&gt;&lt;&gt;tag中的東西不會被變成Markdown</p><p><strong>HTML 語法盡量包在 Markdown 語法裡面</strong></p><h2 id="文字效果-1"><a href="#文字效果-1" class="headerlink" title="文字效果"></a>文字效果</h2><h3 id="底線"><a href="#底線" class="headerlink" title="底線"></a>底線</h3><table><thead><tr><th align="center">語法</th><th align="center">效果</th></tr></thead><tbody><tr><td align="center">&lt;u&gt;底線&lt;/u&gt;</td><td align="center"><u>底線</u></td></tr><tr><td align="center">&lt;del&gt;刪除&lt;/del&gt;</td><td align="center"><del>刪除</del></td></tr></tbody></table><h3 id="字體顏色"><a href="#字體顏色" class="headerlink" title="字體顏色"></a>字體顏色</h3><table><thead><tr><th align="center">語法</th><th align="center">顯示結果</th><th align="center">語法</th><th align="center">顯示結果</th></tr></thead><tbody><tr><td align="center"><code>&lt;font color=#800000&gt;酒紅色&lt;/font&gt;</code></td><td align="center"><font color=#800000>酒紅色</font></td><td align="center"><code>&lt;font color=#FF0000&gt;紅色&lt;/font&gt;</code></td><td align="center"><font color=#FF0000>紅色</font></td></tr><tr><td align="center"><code>&lt;font color=#FF6600&gt;橘色&lt;/font&gt;</code></td><td align="center"><font color=#FF6600>橘色</font></td><td align="center"><code>&lt;font color=#FFD700&gt;金色&lt;/font&gt;</code></td><td align="center"><font color=#FFD700>金色</font></td></tr><tr><td align="center"><code>&lt;font color=#FFFF00&gt;黃色&lt;/font&gt;</code></td><td align="center"><font color=#FFFF00>黃色</font></td><td align="center"><code>&lt;font color=#00FF00&gt;綠色&lt;/font&gt;</code></td><td align="center"><font color=#00FF00>綠色</font></td></tr><tr><td align="center"><code>&lt;font color=#008000&gt;墨綠色&lt;/font&gt;</code></td><td align="center"><font color=#008000>墨綠色</font></td><td align="center"><code>&lt;font color=#00FFFF&gt;青色&lt;/font&gt;</code></td><td align="center"><font color=#00FFFF>青色</font></td></tr><tr><td align="center"><code>&lt;font color=#0000FF&gt;深藍色&lt;/font&gt;</code></td><td align="center"><font color=#0000FF>深藍色</font></td><td align="center"><code>&lt;font color=#FF00FF&gt;粉紅色&lt;/font&gt;</code></td><td align="center"><font color=#FF00FF>粉紅色</font></td></tr><tr><td align="center"><code>&lt;font color=#800080&gt;紫色&lt;/font&gt;</code></td><td align="center"><font color=#800080>紫色</font></td><td align="center"><code>&lt;font color=#808080&gt;灰色&lt;/font&gt;</code></td><td align="center"><font color=#808080>灰色</font></td></tr></tbody></table><h3 id="上下標"><a href="#上下標" class="headerlink" title="上下標"></a>上下標</h3><table><thead><tr><th align="center">語法</th><th align="center">效果</th></tr></thead><tbody><tr><td align="center">3&lt;sup&gt;2&lt;/sup&gt;=9</td><td align="center">3<sup>2</sup>=9</td></tr><tr><td align="center">H&lt;sub&gt;2&lt;/sub&gt;O</td><td align="center">H<sub>2</sub>O</td></tr></tbody></table><h3 id="特殊符號"><a href="#特殊符號" class="headerlink" title="特殊符號"></a>特殊符號</h3><table><thead><tr><th align="center">語法</th><th align="center">效果</th></tr></thead><tbody><tr><td align="center">商標&amp;reg;</td><td align="center">商標&reg;</td></tr><tr><td align="center">&amp;fnof;(X)=X+1</td><td align="center">&fnof;(X)=X+1</td></tr><tr><td align="center">&amp;radic;2</td><td align="center">&radic;2</td></tr><tr><td align="center">45&amp;deg;</td><td align="center">45&deg;</td></tr></tbody></table><h2 id="注音"><a href="#注音" class="headerlink" title="注音"></a>注音</h2><p>語法</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ruby</span>&gt;</span></span><br><span class="line">注<span class="tag">&lt;<span class="name">rp</span>&gt;</span>(<span class="tag">&lt;/<span class="name">rp</span>&gt;</span><span class="tag">&lt;<span class="name">rt</span>&gt;</span>ㄓㄨˋ<span class="tag">&lt;/<span class="name">rt</span>&gt;</span><span class="tag">&lt;<span class="name">rp</span>&gt;</span>)<span class="tag">&lt;/<span class="name">rp</span>&gt;</span></span><br><span class="line">音<span class="tag">&lt;<span class="name">rp</span>&gt;</span>(<span class="tag">&lt;/<span class="name">rp</span>&gt;</span><span class="tag">&lt;<span class="name">rt</span>&gt;</span>ㄧㄣˉ<span class="tag">&lt;/<span class="name">rt</span>&gt;</span><span class="tag">&lt;<span class="name">rp</span>&gt;</span>)<span class="tag">&lt;/<span class="name">rp</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ruby</span>&gt;</span></span><br></pre></td></tr></table></figure><p>效果</p><ruby>注<rp>(</rp><rt>ㄓㄨˋ</rt><rp>)</rp>音<rp>(</rp><rt>ㄧㄣˉ</rt><rp>)</rp></ruby><p>應用方法</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">我很喜歡<span class="tag">&lt;<span class="name">ruby</span>&gt;</span><span class="tag">&lt;<span class="name">font</span> <span class="attr">color</span>=<span class="string">blue</span>&gt;</span><span class="tag">&lt;<span class="name">del</span>&gt;</span>我家的艦隊<span class="tag">&lt;/<span class="name">del</span>&gt;</span><span class="tag">&lt;/<span class="name">font</span>&gt;</span><span class="tag">&lt;<span class="name">rp</span>&gt;</span>(<span class="tag">&lt;/<span class="name">rp</span>&gt;</span><span class="tag">&lt;<span class="name">rt</span>&gt;</span><span class="tag">&lt;<span class="name">font</span> <span class="attr">color</span>=<span class="string">red</span>&gt;</span>VMware Esxi<span class="tag">&lt;/<span class="name">font</span>&gt;</span><span class="tag">&lt;/<span class="name">rt</span>&gt;</span><span class="tag">&lt;<span class="name">rp</span>&gt;</span>)<span class="tag">&lt;/<span class="name">rp</span>&gt;</span><span class="tag">&lt;/<span class="name">ruby</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="我很喜歡我家的艦隊-VMware-Esxi"><a href="#我很喜歡我家的艦隊-VMware-Esxi" class="headerlink" title="我很喜歡我家的艦隊(VMware Esxi)"></a>我很喜歡<ruby><font color=blue><del>我家的艦隊</del></font><rp>(</rp><rt><font color=red>VMware Esxi</font></rt><rp>)</rp></ruby></h4><p>* 這種用法的時候在&lt;&gt;&lt;/&gt;內的區塊就全部用Html語法才不會有問題</p><h1 id="參考文獻"><a href="#參考文獻" class="headerlink" title="參考文獻"></a>參考文獻</h1><p><a href="https://xiwan.io/archive/markdown-html-common-syntax-summary.html">西灣筆記</a></p><p><a href="https://ed521.github.io/2019/08/hexo-markdown/">馬力歐的部落格</a></p>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h1&gt;&lt;p&gt;很久以前當我剛開始寫Blog的時候,&lt;del&gt;曾經把我常用的語法整理過一遍&lt;/del&gt;(找不到了),但是最近看到一些騷操作就想拿出來獨立整理一篇&lt;/p&gt;</summary>
    
    
    
    <category term="Misc" scheme="http://kiwi0093.github.io/Wiki-site/categories/Misc/"/>
    
    
    <category term="Markdown" scheme="http://kiwi0093.github.io/Wiki-site/tags/Markdown/"/>
    
  </entry>
  
  <entry>
    <title>Hexo介紹與整體規劃</title>
    <link href="http://kiwi0093.github.io/Wiki-site/wiki/Network/Hexo/1.introduce/"/>
    <id>http://kiwi0093.github.io/Wiki-site/wiki/Network/Hexo/1.introduce/</id>
    <published>2021-07-12T03:11:22.837Z</published>
    <updated>2021-07-12T03:11:22.837Z</updated>
    
    <content type="html"><![CDATA[<h2 id="目標"><a href="#目標" class="headerlink" title="目標"></a>目標</h2><p>利用<a href="https://hexo.io/zh-tw/">Hexo</a> + <a href="https://pages.github.com/">Github Page</a>實現個人Blog + Wiki的搭建</p><span id="more"></span><h2 id="基本架構"><a href="#基本架構" class="headerlink" title="基本架構"></a>基本架構</h2><p><img src="https://raw.githubusercontent.com/Kiwi0093/graph/master/img/Blog_wiki_construction.PNG" alt="Construction"></p><h3 id="說明"><a href="#說明" class="headerlink" title="說明"></a>說明</h3><p>這裡利用了Github Page的幾個特性</p><ul><li>在<Username>.github.io這個repo的master內的index.html會產生https://<Username>.github.io/這個有效網址</li><li>在其他repo中,Github Page會把branch:gh-pages內的index.thml產生出https://<username>.github.io/&lt;其他repo&gt;/這個有效網址</li></ul><p>所以可以將Blog的網頁產生到<username>.github.io這個repo的master裡面作為主網頁,將其他想要的theme的網頁產生到其他repo的gh-pages內作為其他子網站使用</p><p>雖然可以利用Hexo指令可以跑特定<code>_config.yml</code>的方法可以把兩個放在一起,但是其實原理上跟上表是一樣的只是可以把Hexo Wiki 跟Hexo Blog存在同一個目錄裡面將git同步管理這點整合</p><h3 id="參考資料"><a href="#參考資料" class="headerlink" title="參考資料"></a>參考資料</h3><p><a href="https://hexo.io/zh-tw/docs/">Hexo官方文件</a></p><p><a href="https://ohlia.github.io/Wiki-site/">OHLIA’s Wiki</a></p><p><a href="https://masantu.com/blog/2020-05-23/hello-hexo-wiki/#%E6%9B%B4%E6%96%B0">別院牧志</a></p><p><a href="https://kuang.netlify.app/blog/hexo.html">風月</a></p><p><a href="https://ryanluoxu.github.io/2017/11/27/Hexo-Next-%E6%B7%BB%E5%8A%A0-Gitment-%E8%AF%84%E8%AE%BA%E7%B3%BB%E7%BB%9F/">途探生靈</a></p>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;目標&quot;&gt;&lt;a href=&quot;#目標&quot; class=&quot;headerlink&quot; title=&quot;目標&quot;&gt;&lt;/a&gt;目標&lt;/h2&gt;&lt;p&gt;利用&lt;a href=&quot;https://hexo.io/zh-tw/&quot;&gt;Hexo&lt;/a&gt; + &lt;a href=&quot;https://pages.github.com/&quot;&gt;Github Page&lt;/a&gt;實現個人Blog + Wiki的搭建&lt;/p&gt;</summary>
    
    
    
    <category term="Network" scheme="http://kiwi0093.github.io/Wiki-site/categories/Network/"/>
    
    <category term="Hexo" scheme="http://kiwi0093.github.io/Wiki-site/categories/Network/Hexo/"/>
    
    
    <category term="Network" scheme="http://kiwi0093.github.io/Wiki-site/tags/Network/"/>
    
    <category term="Server" scheme="http://kiwi0093.github.io/Wiki-site/tags/Server/"/>
    
    <category term="Git" scheme="http://kiwi0093.github.io/Wiki-site/tags/Git/"/>
    
    <category term="Blog" scheme="http://kiwi0093.github.io/Wiki-site/tags/Blog/"/>
    
    <category term="Wiki" scheme="http://kiwi0093.github.io/Wiki-site/tags/Wiki/"/>
    
  </entry>
  
  <entry>
    <title>Hexo安裝</title>
    <link href="http://kiwi0093.github.io/Wiki-site/wiki/Network/Hexo/2-installation/"/>
    <id>http://kiwi0093.github.io/Wiki-site/wiki/Network/Hexo/2-installation/</id>
    <published>2021-07-12T03:11:22.837Z</published>
    <updated>2021-07-12T03:11:22.837Z</updated>
    
    <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>Hexo是個很簡單好用的靜態網頁產生工具,基本上就是需要npm+node.js</p><span id="more"></span><h2 id="相關工具"><a href="#相關工具" class="headerlink" title="相關工具"></a>相關工具</h2><h3 id="Git"><a href="#Git" class="headerlink" title="Git"></a>Git</h3><ul><li><h4 id="Linux"><a href="#Linux" class="headerlink" title="Linux"></a>Linux</h4><ul><li><h5 id="Arch系列"><a href="#Arch系列" class="headerlink" title="Arch系列"></a>Arch系列</h5></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo pacman -S git</span><br></pre></td></tr></table></figure><ul><li><h5 id="Debian-Ubuntu系"><a href="#Debian-Ubuntu系" class="headerlink" title="Debian/Ubuntu系"></a>Debian/Ubuntu系</h5></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install git-core</span><br></pre></td></tr></table></figure><p>由於Github Desktop Linux版的安裝比較麻煩,尤其是在<del>強國</del>天朝內沒有翻牆的情況下安裝比較累</p><p>所以會建議用Command Line的git就好了,大不了寫成script還是很方便</p></li><li><h4 id="Windows"><a href="#Windows" class="headerlink" title="Windows"></a>Windows</h4><p>Windows下建議直接下載<a href="https://desktop.github.com/">Github Desktop</a>會比較方便,可以在官方網頁上下載安裝也可以透過chocolatey安裝</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">choco install github-desktop</span><br></pre></td></tr></table></figure></li></ul><h3 id="node-js-amp-npm"><a href="#node-js-amp-npm" class="headerlink" title="node.js &amp; npm"></a>node.js &amp; npm</h3><ul><li><h4 id="Linux-1"><a href="#Linux-1" class="headerlink" title="Linux"></a>Linux</h4><ul><li><h5 id="Arch系列-1"><a href="#Arch系列-1" class="headerlink" title="Arch系列"></a>Arch系列</h5></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo pacman -S nodejs npm</span><br></pre></td></tr></table></figure><ul><li><h5 id="Debian-Ubuntu系-1"><a href="#Debian-Ubuntu系-1" class="headerlink" title="Debian/Ubuntu系"></a>Debian/Ubuntu系</h5></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install -y nodejs npm </span><br></pre></td></tr></table></figure></li><li><h4 id="Windows-1"><a href="#Windows-1" class="headerlink" title="Windows"></a>Windows</h4><p>同Github Desktop,可以去<a href="https://nodejs.org/en/">node.js</a>下載安裝,裝的時候就會包含npm一起裝了,或是透過chocolatey安裝</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">choco install nodejs</span><br></pre></td></tr></table></figure></li></ul><h2 id="Hexo安裝"><a href="#Hexo安裝" class="headerlink" title="Hexo安裝"></a>Hexo安裝</h2><p>Hexo是利用npm安裝的,我沒在WIndows下安裝過,但是我想應該都是一樣的</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g hexo-cli</span><br></pre></td></tr></table></figure><p>跑完就裝好了</p>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h1&gt;&lt;p&gt;Hexo是個很簡單好用的靜態網頁產生工具,基本上就是需要npm+node.js&lt;/p&gt;</summary>
    
    
    
    <category term="Network" scheme="http://kiwi0093.github.io/Wiki-site/categories/Network/"/>
    
    <category term="Hexo" scheme="http://kiwi0093.github.io/Wiki-site/categories/Network/Hexo/"/>
    
    
    <category term="Network" scheme="http://kiwi0093.github.io/Wiki-site/tags/Network/"/>
    
    <category term="Server" scheme="http://kiwi0093.github.io/Wiki-site/tags/Server/"/>
    
    <category term="Git" scheme="http://kiwi0093.github.io/Wiki-site/tags/Git/"/>
    
    <category term="Blog" scheme="http://kiwi0093.github.io/Wiki-site/tags/Blog/"/>
    
    <category term="Wiki" scheme="http://kiwi0093.github.io/Wiki-site/tags/Wiki/"/>
    
  </entry>
  
  <entry>
    <title>Hexo基本設定與使用</title>
    <link href="http://kiwi0093.github.io/Wiki-site/wiki/Network/Hexo/3-Hexo-setting/"/>
    <id>http://kiwi0093.github.io/Wiki-site/wiki/Network/Hexo/3-Hexo-setting/</id>
    <published>2021-07-12T03:11:22.837Z</published>
    <updated>2021-07-13T04:11:41.497Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Hexo本體設定"><a href="#Hexo本體設定" class="headerlink" title="Hexo本體設定"></a>Hexo本體設定</h2><p>Hexo本體的設定均在<code>&lt;folder&gt;/_config.yml</code>裡面,大多數的設定都可以直接沿用很方便只有一些部分需要修改調整</p><p>詳細的<a href="https://hexo.io/docs/configuration.html">Hexo Configuration</a></p><span id="more"></span><h4 id="Site-Section"><a href="#Site-Section" class="headerlink" title="#Site Section"></a>#Site Section</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># Site</span><br><span class="line">title: Kiwi<span class="number">&#x27;</span>s Blog</span><br><span class="line">subtitle: 中年大叔的自言自語</span><br><span class="line">description: <span class="string">&#x27;&#x27;</span></span><br><span class="line"><span class="string">keywords:</span></span><br><span class="line"><span class="string">author: Kiwi </span></span><br><span class="line"><span class="string">language: zh_TW</span></span><br><span class="line"><span class="string">timezone: </span></span><br></pre></td></tr></table></figure><table><thead><tr><th align="left">設定</th><th align="left">描述</th></tr></thead><tbody><tr><td align="left"><code>title</code></td><td align="left">網站標題</td></tr><tr><td align="left"><code>subtitle</code></td><td align="left">網站副標題</td></tr><tr><td align="left"><code>description</code></td><td align="left">網站描述</td></tr><tr><td align="left"><code>keywords</code></td><td align="left">網站的關鍵詞。支援多個關鍵詞。</td></tr><tr><td align="left"><code>author</code></td><td align="left">您的名字</td></tr><tr><td align="left"><code>language</code></td><td align="left">網站使用的語言，參考 <a href="https://en.wikipedia.org/wiki/List_of_ISO_639-1_codes">2-lettter ISO-639-1 code</a>，預設為 <code>en</code></td></tr><tr><td align="left"><code>timezone</code></td><td align="left">網站時區，Hexo 預設使用您電腦的時區，您可以在 <a href="https://en.wikipedia.org/wiki/List_of_tz_database_time_zones">時區列表</a> 尋找適當的時區，例如 <code>America/New_York</code> 、 <code>Japan</code> 與 <code>UTC</code></td></tr></tbody></table><h4 id="URL-Section"><a href="#URL-Section" class="headerlink" title="#URL Section"></a>#URL Section</h4><p>如果您的網站存放在子目錄中，例如 <code>http://example.org/blog</code>，請將您的 <code>url</code> 設為 <code>http://example.org/blog</code> 並把 <code>root</code> 設為 <code>/blog/</code>。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># URL</span><br><span class="line">url: https://kiwi0093.github.io/</span><br><span class="line">root: /</span><br><span class="line">permalink: :year/:month/:day/:title/</span><br><span class="line">permalink_defaults:</span><br><span class="line">pretty_urls:</span><br><span class="line">  trailing_index: true</span><br><span class="line">  trailing_html: true</span><br></pre></td></tr></table></figure><table><thead><tr><th align="left">設定</th><th align="left">描述</th><th align="left">預設值</th></tr></thead><tbody><tr><td align="left"><code>url</code></td><td align="left">網站的網址，must starts with <code>http://</code> or <code>https://</code></td><td align="left"></td></tr><tr><td align="left"><code>root</code></td><td align="left">網站的根目錄</td><td align="left"></td></tr><tr><td align="left"><code>permalink</code></td><td align="left">文章 <a href="https://hexo.io/zh-tw/docs/permalinks">永久連結</a> 的格式</td><td align="left"><code>:year/:month/:day/:title/</code></td></tr><tr><td align="left"><code>permalink_defaults</code></td><td align="left"><code>permalink</code> 中各區段的預設值</td><td align="left"></td></tr><tr><td align="left"><code>pretty_urls</code></td><td align="left">改寫 <a href="https://hexo.io/zh-tw/docs/variables"><code>permalink</code></a> 的值來美化 URL</td><td align="left"></td></tr><tr><td align="left"><code>pretty_urls.trailing_index</code></td><td align="left">是否在永久鏈接中保留尾部的 <code>index.html</code>，設置為 <code>false</code> 時去除</td><td align="left"><code>true</code></td></tr><tr><td align="left"><code>pretty_urls.trailing_html</code></td><td align="left">是否在永久鏈接中保留尾部的 <code>.html</code>, 設置為 <code>false</code> 時去除 (<em>對尾部的 <code>index.html</code>無效</em>)</td><td align="left"><code>true</code></td></tr></tbody></table><h4 id="Directory-Section"><a href="#Directory-Section" class="headerlink" title="#Directory Section"></a>#Directory Section</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"># Directory</span><br><span class="line">source_dir: source</span><br><span class="line">public_dir: <span class="keyword">public</span></span><br><span class="line">tag_dir: tags</span><br><span class="line">archive_dir: archives</span><br><span class="line">category_dir: categories</span><br><span class="line">code_dir: downloads/code</span><br><span class="line">i18n_dir: :lang</span><br><span class="line">skip_render:</span><br></pre></td></tr></table></figure><table><thead><tr><th align="left">設定</th><th align="left">描述</th><th align="left">預設值</th></tr></thead><tbody><tr><td align="left"><code>source_dir</code></td><td align="left">原始檔案資料夾，這個資料夾用於存放您的內容</td><td align="left"><code>source</code></td></tr><tr><td align="left"><code>public_dir</code></td><td align="left">靜態檔案資料夾，這個資料夾用於存放建立完畢的檔案</td><td align="left">public</td></tr><tr><td align="left"><code>tag_dir</code></td><td align="left">標籤資料夾</td><td align="left"><code>tags</code></td></tr><tr><td align="left"><code>archive_dir</code></td><td align="left">彙整資料夾</td><td align="left"><code>archives</code></td></tr><tr><td align="left"><code>category_dir</code></td><td align="left">分類資料夾</td><td align="left"><code>categories</code></td></tr><tr><td align="left"><code>code_dir</code></td><td align="left">Include code 資料夾</td><td align="left"><code>downloads/code</code></td></tr><tr><td align="left"><code>i18n_dir</code></td><td align="left">國際化（i18n）資料夾</td><td align="left"><code>:lang</code></td></tr><tr><td align="left"><code>skip_render</code></td><td align="left">跳過指定檔案的渲染，您可使用 <a href="https://github.com/micromatch/micromatch#extended-globbing">glob 表達式</a> 來配對路徑</td><td align="left"></td></tr></tbody></table><h4 id="Writing-Section"><a href="#Writing-Section" class="headerlink" title="# Writing Section"></a># Writing Section</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"># Writing</span><br><span class="line">new_post_name: :title.md</span><br><span class="line">default_layout: post</span><br><span class="line">titlecase: <span class="literal">false</span></span><br><span class="line">external_link:</span><br><span class="line">  enable: <span class="literal">true</span></span><br><span class="line">  field: site</span><br><span class="line">  exclude: <span class="string">&#x27;&#x27;</span></span><br><span class="line"><span class="string">filename_case: 0</span></span><br><span class="line"><span class="string">render_drafts: false</span></span><br><span class="line"><span class="string">post_asset_folder: false</span></span><br><span class="line"><span class="string">relative_link: false</span></span><br><span class="line"><span class="string">future: true</span></span><br><span class="line"><span class="string">highlight:</span></span><br><span class="line"><span class="string">  enable: true</span></span><br><span class="line"><span class="string">  line_number: true</span></span><br><span class="line"><span class="string">  auto_detect: false</span></span><br><span class="line"><span class="string">  tab_replace: &#x27;</span>&#x27;</span><br><span class="line">  wrap: <span class="literal">true</span></span><br><span class="line">  hljs: <span class="literal">false</span></span><br><span class="line">prismjs:</span><br><span class="line">  enable: <span class="literal">false</span></span><br><span class="line">  preprocess: <span class="literal">true</span></span><br><span class="line">  line_number: <span class="literal">true</span></span><br><span class="line">  tab_replace: <span class="string">&#x27;&#x27;</span></span><br></pre></td></tr></table></figure><table><thead><tr><th align="left">設定</th><th align="left">描述</th><th align="left">預設值</th></tr></thead><tbody><tr><td align="left"><code>new_post_name</code></td><td align="left">新文章的檔案名稱</td><td align="left"><code>:title.md</code></td></tr><tr><td align="left"><code>default_layout</code></td><td align="left">預設佈局</td><td align="left"><code>post</code></td></tr><tr><td align="left"><code>auto_spacing</code></td><td align="left">在西方文字與東方文字中加入空白</td><td align="left"><code>false</code></td></tr><tr><td align="left"><code>titlecase</code></td><td align="left">把標題轉換為 title case</td><td align="left"><code>false</code></td></tr><tr><td align="left"><code>external_link</code></td><td align="left">在新頁籤中開啟連結</td><td align="left"><code>true</code></td></tr><tr><td align="left"><code>external_link.enable</code></td><td align="left">在新頁籤中開啟連結</td><td align="left"><code>true</code></td></tr><tr><td align="left"><code>external_link.field</code></td><td align="left">Applies to the whole <code>site</code> or <code>post</code> only</td><td align="left"><code>site</code></td></tr><tr><td align="left"><code>external_link.exclude</code></td><td align="left">Exclude hostname. Specify subdomain when applicable, including <code>www</code></td><td align="left"><code>[]</code></td></tr><tr><td align="left"><code>filename_case</code></td><td align="left">把檔案名稱轉換為: <code>1</code> 小寫或 <code>2</code> 大寫</td><td align="left"><code>0</code></td></tr><tr><td align="left"><code>render_drafts</code></td><td align="left">顯示草稿</td><td align="left"><code>false</code></td></tr><tr><td align="left"><code>post_asset_folder</code></td><td align="left">啟動 <a href="https://hexo.io/zh-tw/docs/asset-folders">Asset 資料夾</a></td><td align="left"><code>false</code></td></tr><tr><td align="left"><code>relative_link</code></td><td align="left">把連結改為與根目錄的相對位址</td><td align="left"><code>false</code></td></tr><tr><td align="left"><code>future</code></td><td align="left">顯示未來的文章</td><td align="left"><code>true</code></td></tr><tr><td align="left"><code>highlight</code></td><td align="left">程式碼區塊的設定, see <a href="https://hexo.io/docs/syntax-highlight#Highlight-js">Highlight.js</a> section for usage guide</td><td align="left"></td></tr><tr><td align="left"><code>prismjs</code></td><td align="left">程式碼區塊的設定, see <a href="https://hexo.io/docs/syntax-highlight#PrismJS">PrismJS</a> section for usage guide</td><td align="left"></td></tr></tbody></table><h4 id="Homepage-Section"><a href="#Homepage-Section" class="headerlink" title="# Homepage Section"></a># Homepage Section</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># Home page setting</span><br><span class="line"><span class="meta"># path: Root path for your blogs index page. (default = <span class="meta-string">&#x27;&#x27;)</span></span></span><br><span class="line"><span class="meta-string"><span class="meta"># per_page: Posts displayed per page. (0 = disable pagination)</span></span></span><br><span class="line"><span class="meta-string"><span class="meta"># order_by: Posts order. (Order by date descending by default)</span></span></span><br><span class="line"><span class="meta-string"><span class="meta">index_generator:</span></span></span><br><span class="line"><span class="meta-string"><span class="meta">  path: &#x27;</span>&#x27;</span></span><br><span class="line">  per_page: <span class="number">10</span></span><br><span class="line">  order_by: -date</span><br></pre></td></tr></table></figure><h4 id="Category-amp-Tag-Section"><a href="#Category-amp-Tag-Section" class="headerlink" title="# Category &amp; Tag Section"></a># Category &amp; Tag Section</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># Category &amp; Tag</span><br><span class="line">default_category: uncategorized</span><br><span class="line">category_map:</span><br><span class="line">tag_map:</span><br></pre></td></tr></table></figure><table><thead><tr><th align="left">設定</th><th align="left">描述</th><th align="left">預設值</th></tr></thead><tbody><tr><td align="left"><code>default_category</code></td><td align="left">預設分類</td><td align="left"><code>uncategorized</code></td></tr><tr><td align="left"><code>category_map</code></td><td align="left">分類別名</td><td align="left"></td></tr><tr><td align="left"><code>tag_map</code></td><td align="left">標籤別名</td><td align="left"></td></tr></tbody></table><h4 id="Date-amp-Time-Section"><a href="#Date-amp-Time-Section" class="headerlink" title="# Date &amp; Time Section"></a># Date &amp; Time Section</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># Date / Time format</span><br><span class="line">## Hexo uses Moment.js to parse <span class="keyword">and</span> display date</span><br><span class="line">## You can customize the date format as defined in</span><br><span class="line">#<span class="meta"># http:<span class="comment">//momentjs.com/docs/#/displaying/format/</span></span></span><br><span class="line">date_format: YYYY-MM-DD</span><br><span class="line">time_format: HH:mm:ss</span><br><span class="line">## updated_option supports <span class="string">&#x27;mtime&#x27;</span>, <span class="string">&#x27;date&#x27;</span>, <span class="string">&#x27;empty&#x27;</span></span><br><span class="line">updated_option: <span class="string">&#x27;mtime&#x27;</span></span><br></pre></td></tr></table></figure><h4 id="Pagination-Section"><a href="#Pagination-Section" class="headerlink" title="# Pagination Section"></a># Pagination Section</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># Pagination</span><br><span class="line">per_page: 10</span><br><span class="line">pagination_dir: page</span><br></pre></td></tr></table></figure><table><thead><tr><th align="left">設定</th><th align="left">描述</th><th align="left">預設值</th></tr></thead><tbody><tr><td align="left"><code>per_page</code></td><td align="left">一頁顯示的文章量 (<code>0</code> = 關閉分頁功能)</td><td align="left"><code>10</code></td></tr><tr><td align="left"><code>pagination_dir</code></td><td align="left">分頁目錄</td><td align="left"><code>page</code></td></tr></tbody></table><h4 id="Include-Exclude-Section"><a href="#Include-Exclude-Section" class="headerlink" title="# Include / Exclude Section"></a># Include / Exclude Section</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># Include / <span class="function">Exclude <span class="title">file</span><span class="params">(s)</span></span></span><br><span class="line"><span class="function">#<span class="meta"># <span class="meta-keyword">include</span>:/exclude: options only apply to the <span class="meta-string">&#x27;source/&#x27;</span> folder</span></span></span><br><span class="line"><span class="function">include:</span></span><br><span class="line"><span class="function">exclude:</span></span><br><span class="line"><span class="function">ignore:</span></span><br></pre></td></tr></table></figure><table><thead><tr><th align="left">設定</th><th align="left">描述</th></tr></thead><tbody><tr><td align="left"><code>include</code></td><td align="left">Hexo 預設會忽略隱藏檔與隱藏資料夾，但列在這個欄位中的檔案，Hexo 仍然會去處理</td></tr><tr><td align="left"><code>exclude</code></td><td align="left">列在這裡的檔案將會被 Hexo 忽略</td></tr><tr><td align="left"><code>ignore</code></td><td align="left">Ignore files/folders</td></tr></tbody></table><h4 id="Extension-Section"><a href="#Extension-Section" class="headerlink" title="# Extension Section"></a># Extension Section</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"># Extensions</span><br><span class="line">## Plugins: https:<span class="comment">//hexo.io/plugins/</span></span><br><span class="line">## Themes: https:<span class="comment">//hexo.io/themes/</span></span><br><span class="line">theme: next</span><br><span class="line"></span><br><span class="line"># Deployment</span><br><span class="line">## Docs: https:<span class="comment">//hexo.io/docs/one-command-deployment</span></span><br><span class="line">deploy:</span><br><span class="line">  type: git</span><br><span class="line">  repo: https:<span class="comment">//github.com/Kiwi0093/Kiwi0093.github.io</span></span><br><span class="line">  branch: master</span><br></pre></td></tr></table></figure><table><thead><tr><th align="left">設定</th><th align="left">描述</th></tr></thead><tbody><tr><td align="left"><code>theme</code></td><td align="left">使用主題名稱, 設為 <code>false</code> 表示關閉主題功能</td></tr><tr><td align="left"><code>deploy</code></td><td align="left">佈署設定</td></tr></tbody></table><h2 id="Hexo使用方式"><a href="#Hexo使用方式" class="headerlink" title="Hexo使用方式"></a>Hexo使用方式</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#清除建立好的資料</span></span><br><span class="line">hexo clean</span><br><span class="line"><span class="comment">#建立靜態網頁</span></span><br><span class="line">hexo g</span><br><span class="line"><span class="comment">#啟動Local Server</span></span><br><span class="line">hexo s</span><br><span class="line"><span class="comment">#Deploy到Server上</span></span><br><span class="line">hexo d</span><br></pre></td></tr></table></figure><h3 id="Hexo剛建好的時候需要手動建立以下頁面"><a href="#Hexo剛建好的時候需要手動建立以下頁面" class="headerlink" title="Hexo剛建好的時候需要手動建立以下頁面"></a>Hexo剛建好的時候需要手動建立以下頁面</h3><ul><li><p>新增一個分類主頁：<code>hexo new page categories</code></p></li><li><p>新增一個Tag主頁：<code>hexo new page tags</code></p><p>在 <code>source/tags/index.md</code> 编辑:</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">type: <span class="string">&quot;tags&quot;</span></span><br><span class="line">---</span><br></pre></td></tr></table></figure></li></ul><h3 id="Hexo使用其他config-yml的方法"><a href="#Hexo使用其他config-yml的方法" class="headerlink" title="Hexo使用其他config.yml的方法"></a>Hexo使用其他config.yml的方法</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 使用自訂的 <span class="string">&#x27;custom.yml&#x27;</span> 取代預設的 <span class="string">&#x27;_config.yml&#x27;</span></span><br><span class="line">$ hexo server --config custom.yml</span><br><span class="line"></span><br><span class="line"># 使用多個配置檔, 有衝突時優先使用 <span class="string">&#x27;custom2.json&#x27;</span></span><br><span class="line">$ hexo server --config custom.yml,custom2.json</span><br></pre></td></tr></table></figure><h2 id="參考資料"><a href="#參考資料" class="headerlink" title="參考資料"></a>參考資料</h2><p><a href="https://ohlia.github.io/Wiki-site/wiki/Hexo/build-blog-by-hexo/">OHLIA’s Wiki</a></p><p><a href="https://hexo.io/zh-tw/docs/">Hexo的官方文件</a></p><h2 id="同場加映"><a href="#同場加映" class="headerlink" title="同場加映"></a>同場加映</h2><p>最近更新後常常會有</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">FATAL YAMLException: unknown tag !&lt;tag:yaml.org,2002:js/regexp&gt; (116:49)</span><br><span class="line"></span><br><span class="line"> 113 |  ... ttributes: <span class="literal">true</span></span><br><span class="line"> 114 |  ... ce: <span class="literal">true</span></span><br><span class="line"> 115 |  ... ore --&gt;<span class="string">&#x27; https://hexo.io/docs/tag-plugins#Post-Excerpt</span></span><br><span class="line"><span class="string"> 116 |  ... ents: [ !!js/regexp /^\s*more/]</span></span><br><span class="line"><span class="string">------------------------------------------^</span></span><br><span class="line"><span class="string"> 117 |  ... true</span></span><br><span class="line"><span class="string"> 118 |  ... butes: true</span></span><br><span class="line"><span class="string">    at generateError (/home/kiwi/GitHub/Wiki-site/node_modules/js-yaml/lib/loader.js:183:10)</span></span><br><span class="line"><span class="string">    at throwError (/home/kiwi/GitHub/Wiki-site/node_modules/js-yaml/lib/loader.js:187:9)</span></span><br><span class="line"><span class="string">    at composeNode (/home/kiwi/GitHub/Wiki-site/node_modules/js-yaml/lib/loader.js:1521:7)</span></span><br><span class="line"><span class="string">    at readFlowCollection (/home/kiwi/GitHub/Wiki-site/node_modules/js-yaml/lib/loader.js:780:5)</span></span><br><span class="line"><span class="string">    at composeNode (/home/kiwi/GitHub/Wiki-site/node_modules/js-yaml/lib/loader.js:1442:11)</span></span><br><span class="line"><span class="string">    at readBlockMapping (/home/kiwi/GitHub/Wiki-site/node_modules/js-yaml/lib/loader.js:1164:11)</span></span><br><span class="line"><span class="string">    at composeNode (/home/kiwi/GitHub/Wiki-site/node_modules/js-yaml/lib/loader.js:1441:12)</span></span><br><span class="line"><span class="string">    at readBlockMapping (/home/kiwi/GitHub/Wiki-site/node_modules/js-yaml/lib/loader.js:1164:11)</span></span><br><span class="line"><span class="string">    at composeNode (/home/kiwi/GitHub/Wiki-site/node_modules/js-yaml/lib/loader.js:1441:12)</span></span><br><span class="line"><span class="string">    at readDocument (/home/kiwi/GitHub/Wiki-site/node_modules/js-yaml/lib/loader.js:1625:3)</span></span><br><span class="line"><span class="string">    at loadDocuments (/home/kiwi/GitHub/Wiki-site/node_modules/js-yaml/lib/loader.js:1688:5)</span></span><br><span class="line"><span class="string">    at Object.load (/home/kiwi/GitHub/Wiki-site/node_modules/js-yaml/lib/loader.js:1714:19)</span></span><br><span class="line"><span class="string">    at Hexo.yamlHelper (/home/kiwi/GitHub/Wiki-site/node_modules/hexo/lib/plugins/renderer/yaml.js:7:15)</span></span><br><span class="line"><span class="string">    at Hexo.tryCatcher (/home/kiwi/GitHub/Wiki-site/node_modules/bluebird/js/release/util.js:16:23)</span></span><br><span class="line"><span class="string">    at Hexo.&lt;anonymous&gt; (/home/kiwi/GitHub/Wiki-site/node_modules/bluebird/js/release/method.js:15:34)</span></span><br><span class="line"><span class="string">    at /home/kiwi/GitHub/Wiki-site/node_modules/hexo/lib/hexo/render.js:75:22</span></span><br><span class="line"><span class="string">    at tryCatcher (/home/kiwi/GitHub/Wiki-site/node_modules/bluebird/js/release/util.js:16:23)</span></span><br><span class="line"><span class="string">    at Promise._settlePromiseFromHandler (/home/kiwi/GitHub/Wiki-site/node_modules/bluebird/js/release/promise.js:547:31)</span></span><br><span class="line"><span class="string">    at Promise._settlePromise (/home/kiwi/GitHub/Wiki-site/node_modules/bluebird/js/release/promise.js:604:18)</span></span><br><span class="line"><span class="string">    at Promise._settlePromise0 (/home/kiwi/GitHub/Wiki-site/node_modules/bluebird/js/release/promise.js:649:10)</span></span><br><span class="line"><span class="string">    at Promise._settlePromises (/home/kiwi/GitHub/Wiki-site/node_modules/bluebird/js/release/promise.js:729:18)</span></span><br><span class="line"><span class="string">    at _drainQueueStep (/home/kiwi/GitHub/Wiki-site/node_modules/bluebird/js/release/async.js:93:12) &#123;</span></span><br><span class="line"><span class="string">  reason: &#x27;</span>unknown tag !&lt;tag:yaml.org,2002:js/regexp&gt;<span class="string">&#x27;,</span></span><br><span class="line"><span class="string">.......</span></span><br></pre></td></tr></table></figure><p>這樣的錯誤訊息跑出來,解決方案如下</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># /under/your/web/_config.yml</span></span><br><span class="line">---------------------------------------------------------------------------------------------------------------------------------</span><br><span class="line">....</span><br><span class="line">html_minifier:  </span><br><span class="line">  collapseBooleanAttributes: <span class="literal">true</span></span><br><span class="line">  collapseWhitespace: <span class="literal">true</span></span><br><span class="line">  <span class="comment"># Ignore &#x27;&lt;!-- more --&gt;&#x27; https://hexo.io/docs/tag-plugins#Post-Excerpt</span></span><br><span class="line">  <span class="comment">#ignoreCustomComments: [ !!js/regexp /^\s*more/]#把這行Mark掉就好了</span></span><br><span class="line">  removeComments: <span class="literal">true</span></span><br><span class="line">  removeEmptyAttributes: <span class="literal">true</span></span><br><span class="line">  removeScriptTypeAttributes: <span class="literal">true</span></span><br><span class="line">  removeStyleLinkTypeAttributes: <span class="literal">true</span></span><br><span class="line">  minifyJS: <span class="literal">true</span></span><br><span class="line">  minifyCSS: <span class="literal">true</span></span><br><span class="line">...</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;Hexo本體設定&quot;&gt;&lt;a href=&quot;#Hexo本體設定&quot; class=&quot;headerlink&quot; title=&quot;Hexo本體設定&quot;&gt;&lt;/a&gt;Hexo本體設定&lt;/h2&gt;&lt;p&gt;Hexo本體的設定均在&lt;code&gt;&amp;lt;folder&amp;gt;/_config.yml&lt;/code&gt;裡面,大多數的設定都可以直接沿用很方便只有一些部分需要修改調整&lt;/p&gt;
&lt;p&gt;詳細的&lt;a href=&quot;https://hexo.io/docs/configuration.html&quot;&gt;Hexo Configuration&lt;/a&gt;&lt;/p&gt;</summary>
    
    
    
    <category term="Network" scheme="http://kiwi0093.github.io/Wiki-site/categories/Network/"/>
    
    <category term="Hexo" scheme="http://kiwi0093.github.io/Wiki-site/categories/Network/Hexo/"/>
    
    
    <category term="Network" scheme="http://kiwi0093.github.io/Wiki-site/tags/Network/"/>
    
    <category term="Server" scheme="http://kiwi0093.github.io/Wiki-site/tags/Server/"/>
    
    <category term="Git" scheme="http://kiwi0093.github.io/Wiki-site/tags/Git/"/>
    
    <category term="Blog" scheme="http://kiwi0093.github.io/Wiki-site/tags/Blog/"/>
    
    <category term="Wiki" scheme="http://kiwi0093.github.io/Wiki-site/tags/Wiki/"/>
    
  </entry>
  
  <entry>
    <title>Hexo的Plugin與使用</title>
    <link href="http://kiwi0093.github.io/Wiki-site/wiki/Network/Hexo/4-Hexo-plugin/"/>
    <id>http://kiwi0093.github.io/Wiki-site/wiki/Network/Hexo/4-Hexo-plugin/</id>
    <published>2021-07-12T03:11:22.837Z</published>
    <updated>2021-07-13T04:18:20.014Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Plugin安裝方法"><a href="#Plugin安裝方法" class="headerlink" title="Plugin安裝方法"></a>Plugin安裝方法</h2><p>Hexo Plugin官方網頁:<a href="https://hexo.io/plugins/">https://hexo.io/plugins/</a></p><span id="more"></span><h3 id="基本命令"><a href="#基本命令" class="headerlink" title="基本命令"></a>基本命令</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#安裝</span></span><br><span class="line">npm install &lt;plugin&gt; --save</span><br><span class="line"><span class="comment">#解除安裝</span></span><br><span class="line">npm uninstall &lt;plugin&gt; --save</span><br><span class="line"><span class="comment">#更新plugin &amp; Framework(under Hexo Dir)</span></span><br><span class="line">npm update</span><br></pre></td></tr></table></figure><h3 id="追加指令"><a href="#追加指令" class="headerlink" title="追加指令"></a>追加指令</h3><p>先安裝npm-check-update</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#Manjaro環境</span></span><br><span class="line">pacman -S npm-check-update</span><br></pre></td></tr></table></figure><p>有用的指令</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#確認哪些package過期了</span></span><br><span class="line">npm outdate</span><br><span class="line"></span><br><span class="line"><span class="comment">#確認是否有最新的package</span></span><br><span class="line">npm-check-update</span><br><span class="line"><span class="comment">#update package.json</span></span><br><span class="line">ncu -u</span><br><span class="line"><span class="comment">#更新package</span></span><br><span class="line">npm install</span><br></pre></td></tr></table></figure><p>另外,當git clone下整個Blog(包含package.json)時可以不用重新下安裝指令</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#依照package.json更新整個node_module</span></span><br><span class="line">npm update</span><br></pre></td></tr></table></figure><h2 id="本站有安裝的Plugin"><a href="#本站有安裝的Plugin" class="headerlink" title="本站有安裝的Plugin"></a>本站有安裝的Plugin</h2><ul><li><p><a href="https://github.com/hexojs/hexo-deployer-git">hexo-deployer-git</a></p></li><li><p><a href="https://github.com/CHENXCHEN/hexo-renderer-markdown-it-plus">hexo-renderer-markdown-it-plus</a></p></li><li><p><a href="https://github.com/hexojs/hexo-html-minifier">hexo-html-minifier</a></p></li></ul><h2 id="相關設定"><a href="#相關設定" class="headerlink" title="相關設定"></a>相關設定</h2><h4 id="Render-markdown-it-plus-Section"><a href="#Render-markdown-it-plus-Section" class="headerlink" title="Render-markdown-it-plus Section"></a>Render-markdown-it-plus Section</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">markdown_it_plus:</span><br><span class="line">    highlight: <span class="literal">true</span></span><br><span class="line">    html: <span class="literal">true</span></span><br><span class="line">    xhtmlOut: <span class="literal">true</span></span><br><span class="line">    breaks: <span class="literal">true</span></span><br><span class="line">    langPrefix:</span><br><span class="line">    linkify: <span class="literal">true</span></span><br><span class="line">    typographer:</span><br><span class="line">    quotes: “”‘’</span><br><span class="line">    pre_class: highlight</span><br></pre></td></tr></table></figure><h4 id="Deployment-Section"><a href="#Deployment-Section" class="headerlink" title="Deployment Section"></a>Deployment Section</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">deploy:</span><br><span class="line">  type: git</span><br><span class="line">  repo: https:<span class="comment">//github.com/&lt;Username&gt;/&lt;username&gt;.github.io</span></span><br><span class="line">  branch: &lt;branch_name&gt;</span><br></pre></td></tr></table></figure><h4 id="Hexo-html-minifier"><a href="#Hexo-html-minifier" class="headerlink" title="Hexo-html-minifier"></a>Hexo-html-minifier</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">html_minifier:  </span><br><span class="line">  collapseBooleanAttributes: <span class="literal">true</span></span><br><span class="line">  collapseWhitespace: <span class="literal">true</span></span><br><span class="line">  # Ignore <span class="string">&#x27;&lt;!-- more --&gt;&#x27;</span> https:<span class="comment">//hexo.io/docs/tag-plugins#Post-Excerpt</span></span><br><span class="line">  ignoreCustomComments: [ !!js/regexp /^\s*more/]</span><br><span class="line">  removeComments: <span class="literal">true</span></span><br><span class="line">  removeEmptyAttributes: <span class="literal">true</span></span><br><span class="line">  removeScriptTypeAttributes: <span class="literal">true</span></span><br><span class="line">  removeStyleLinkTypeAttributes: <span class="literal">true</span></span><br><span class="line">  minifyJS: <span class="literal">true</span></span><br><span class="line">  minifyCSS: <span class="literal">true</span></span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;Plugin安裝方法&quot;&gt;&lt;a href=&quot;#Plugin安裝方法&quot; class=&quot;headerlink&quot; title=&quot;Plugin安裝方法&quot;&gt;&lt;/a&gt;Plugin安裝方法&lt;/h2&gt;&lt;p&gt;Hexo Plugin官方網頁:&lt;a href=&quot;https://hexo.io/plugins/&quot;&gt;https://hexo.io/plugins/&lt;/a&gt;&lt;/p&gt;</summary>
    
    
    
    <category term="Network" scheme="http://kiwi0093.github.io/Wiki-site/categories/Network/"/>
    
    <category term="Hexo" scheme="http://kiwi0093.github.io/Wiki-site/categories/Network/Hexo/"/>
    
    
    <category term="Network" scheme="http://kiwi0093.github.io/Wiki-site/tags/Network/"/>
    
    <category term="Server" scheme="http://kiwi0093.github.io/Wiki-site/tags/Server/"/>
    
    <category term="Git" scheme="http://kiwi0093.github.io/Wiki-site/tags/Git/"/>
    
    <category term="Blog" scheme="http://kiwi0093.github.io/Wiki-site/tags/Blog/"/>
    
    <category term="Wiki" scheme="http://kiwi0093.github.io/Wiki-site/tags/Wiki/"/>
    
  </entry>
  
  <entry>
    <title>Mirrorlist選用</title>
    <link href="http://kiwi0093.github.io/Wiki-site/wiki/Linux/Manjaro/4-mirrorlist_choose/"/>
    <id>http://kiwi0093.github.io/Wiki-site/wiki/Linux/Manjaro/4-mirrorlist_choose/</id>
    <published>2021-07-12T03:11:22.833Z</published>
    <updated>2021-07-12T03:11:22.833Z</updated>
    
    <content type="html"><![CDATA[<h5 id="參考網頁"><a href="#參考網頁" class="headerlink" title="參考網頁"></a>參考網頁</h5><p><a href="https://www.fosslinux.com/4252/how-to-find-mirror-list-and-set-fastest-download-server-on-manjaro.htm">FOSS Linux</a></p><span id="more"></span><h5 id="By-Country選擇"><a href="#By-Country選擇" class="headerlink" title="By Country選擇"></a>By Country選擇</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo pacman-mirrors --country &lt;County Name&gt;</span><br></pre></td></tr></table></figure><p>這個指令會依照選定的Country的server列表進行速度確認建立mirror-list</p><h5 id="By-速度選擇"><a href="#By-速度選擇" class="headerlink" title="By 速度選擇"></a>By 速度選擇</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo pacman-mirrors --fasttrack &lt;數量&gt;</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;h5 id=&quot;參考網頁&quot;&gt;&lt;a href=&quot;#參考網頁&quot; class=&quot;headerlink&quot; title=&quot;參考網頁&quot;&gt;&lt;/a&gt;參考網頁&lt;/h5&gt;&lt;p&gt;&lt;a href=&quot;https://www.fosslinux.com/4252/how-to-find-mirror-list-and-set-fastest-download-server-on-manjaro.htm&quot;&gt;FOSS Linux&lt;/a&gt;&lt;/p&gt;</summary>
    
    
    
    <category term="Linux" scheme="http://kiwi0093.github.io/Wiki-site/categories/Linux/"/>
    
    <category term="Manjaro" scheme="http://kiwi0093.github.io/Wiki-site/categories/Linux/Manjaro/"/>
    
    
    <category term="Linux" scheme="http://kiwi0093.github.io/Wiki-site/tags/Linux/"/>
    
    <category term="Manjaro" scheme="http://kiwi0093.github.io/Wiki-site/tags/Manjaro/"/>
    
    <category term="Arch" scheme="http://kiwi0093.github.io/Wiki-site/tags/Arch/"/>
    
  </entry>
  
  <entry>
    <title>Manjaro21 for VMware Guest issue</title>
    <link href="http://kiwi0093.github.io/Wiki-site/wiki/Linux/Manjaro/5-Manjaro_v21_VMWARE_guest/"/>
    <id>http://kiwi0093.github.io/Wiki-site/wiki/Linux/Manjaro/5-Manjaro_v21_VMWARE_guest/</id>
    <published>2021-07-12T03:11:22.833Z</published>
    <updated>2021-07-12T03:11:22.833Z</updated>
    
    <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>Manjaro 21 KDE,不知道發了什麼瘋,安裝到VMWare Workstation裡面的時候會有下面兩個問題</p><ul><li><del>用Free driver &amp; none-Free driver無法開機</del>(21.0.7修好了)</li><li>安裝後沒有VM用的Display driver顯示有問題</li></ul><span id="more"></span><h1 id="Boot-from-USB-ISO"><a href="#Boot-from-USB-ISO" class="headerlink" title="Boot from USB/ISO"></a>Boot from USB/ISO</h1><p>雖然問題解決了,但是補充一下對策</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 開機的時候進入grub editor把</span></span><br><span class="line">driver=free 改成 driver=mesa</span><br></pre></td></tr></table></figure><p>就可以了</p><h1 id="Dispaly-issue-fix"><a href="#Dispaly-issue-fix" class="headerlink" title="Dispaly issue fix"></a>Dispaly issue fix</h1><p>基本上就是缺安裝<code>video-virtualmachine</code>這個Vmware跟virtualbox通吃的driver</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#先安裝上需要的package</span><br><span class="line">sudo pacman -S virtualbox-guest-utils open-vm-tools</span><br><span class="line">sudo mhwd -i pci video-virtualmachine</span><br><span class="line">sudo systemctl enable vmtoolsd.service</span><br><span class="line">sudo systemctl start vmtoolsd.service</span><br></pre></td></tr></table></figure><p>理論上這樣就好了</p>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h1&gt;&lt;p&gt;Manjaro 21 KDE,不知道發了什麼瘋,安裝到VMWare Workstation裡面的時候會有下面兩個問題&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;del&gt;用Free driver &amp;amp; none-Free driver無法開機&lt;/del&gt;(21.0.7修好了)&lt;/li&gt;
&lt;li&gt;安裝後沒有VM用的Display driver顯示有問題&lt;/li&gt;
&lt;/ul&gt;</summary>
    
    
    
    <category term="Linux" scheme="http://kiwi0093.github.io/Wiki-site/categories/Linux/"/>
    
    <category term="Manjaro" scheme="http://kiwi0093.github.io/Wiki-site/categories/Linux/Manjaro/"/>
    
    
    <category term="Linux" scheme="http://kiwi0093.github.io/Wiki-site/tags/Linux/"/>
    
    <category term="Manjaro" scheme="http://kiwi0093.github.io/Wiki-site/tags/Manjaro/"/>
    
  </entry>
  
  <entry>
    <title>bsnmp &amp; check_mk_agent</title>
    <link href="http://kiwi0093.github.io/Wiki-site/wiki/FreeBSD/3-SNMP%20&amp;%20Check_MK_agent/"/>
    <id>http://kiwi0093.github.io/Wiki-site/wiki/FreeBSD/3-SNMP%20&amp;%20Check_MK_agent/</id>
    <published>2021-07-12T03:11:22.823Z</published>
    <updated>2021-07-12T03:11:22.823Z</updated>
    
    <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>Librenms需要SNMP才能監控,另外也可以使用check_mk_agent來輔助</p><span id="more"></span><h1 id="參考資料"><a href="#參考資料" class="headerlink" title="參考資料"></a>參考資料</h1><p><a href="http://swimming.leanote.com/post/FreeBSD%E4%B8%8B%E5%AE%89%E8%A3%85check_mk_agent">柯仓无居所</a></p><h1 id="bsnmp"><a href="#bsnmp" class="headerlink" title="bsnmp"></a>bsnmp</h1><p>FreeBSD有內建的bsnmp</p><ol><li><font size=+1 color=Green><code>vi /etc/rc.conf</code></font></li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># /etc/rc.conf</span></span><br><span class="line">--------------------------------------------------------------------------------------------------------------------------------</span><br><span class="line">bsnmpd_enable=<span class="string">&quot;YES&quot;</span></span><br></pre></td></tr></table></figure><ol start="2"><li><font size=+1 color=Green><code>pkg install bsnmp-ucd</code></font></li><li><font size=+1 color=Green><code>vi /etc/snmpd.conf</code></font></li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># /etc/snmpd.conf 加上以下內容</span></span><br><span class="line">--------------------------------------------------------------------------------------------------------------------------------</span><br><span class="line">begemotSnmpdModulePath.<span class="string">&quot;ucd&quot;</span> = <span class="string">&quot;/usr/local/lib/snmp_ucd.so&quot;</span></span><br><span class="line">%ucd</span><br><span class="line">updateInterval = 500</span><br><span class="line">extCheckInterval = 100</span><br><span class="line">extUpdateInterval = 3000</span><br><span class="line">extTimeout = 60</span><br><span class="line"></span><br><span class="line">memMinimumSwap = 1600</span><br><span class="line">memSwapErrorMsg = <span class="string">&quot;No free swap!&quot;</span></span><br><span class="line"></span><br><span class="line">laConfig.1 = <span class="string">&quot;6.0&quot;</span></span><br><span class="line">laConfig.2 = <span class="string">&quot;5.0&quot;</span></span><br><span class="line">laConfig.3 = <span class="string">&quot;4.0&quot;</span></span><br><span class="line"></span><br><span class="line">laErrMessage.1 = <span class="string">&quot;1min load average is high!&quot;</span></span><br><span class="line">laErrMessage.2 = <span class="string">&quot;5min load average is high!&quot;</span></span><br><span class="line">laErrMessage.3 = <span class="string">&quot;15min load average is high!&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Process table</span></span><br><span class="line"></span><br><span class="line">prNames.0 = <span class="string">&quot;httpd&quot;</span></span><br><span class="line">prMin.0 = 3</span><br><span class="line">prMax.0 = 100</span><br><span class="line"></span><br><span class="line">prErrFix.0 = 1</span><br><span class="line">prErrFixCmd.0 = <span class="string">&quot;/usr/local/etc/rc.d/apache22 restart&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Extension commands (extTable)</span></span><br><span class="line"></span><br><span class="line">extNames.0 = <span class="string">&quot;uname&quot;</span></span><br><span class="line">extCommand.0 = <span class="string">&quot;/usr/bin/uname -a&quot;</span></span><br><span class="line"></span><br><span class="line">extNames.1 = <span class="string">&quot;uptime&quot;</span></span><br><span class="line">extCommand.1 = <span class="string">&quot;/usr/bin/uptime&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># example of extension with fix command</span></span><br><span class="line">extNames.2 = <span class="string">&quot;apache&quot;</span></span><br><span class="line">extCommand.2 = <span class="string">&quot;/usr/local/etc/rc.d/apache status&quot;</span></span><br><span class="line">extErrFix.2 = 1</span><br><span class="line">extErrFixCmd.2 = <span class="string">&quot;/usr/local/etc/rc.d/apache restart&quot;</span></span><br></pre></td></tr></table></figure><ol start="4"><li><font size=+1 color=Green><code>/etc/rc.d/bsnmpd restart</code></font></li><li><font size=+1 color=Green><code>bsnmpwalk -v 2c -c public</code></font></li></ol><p>確認有取得資料就是OK了</p><h1 id="check-mk-agent"><a href="#check-mk-agent" class="headerlink" title="check_mk_agent"></a>check_mk_agent</h1><h2 id="pre-install-needed"><a href="#pre-install-needed" class="headerlink" title="pre-install needed"></a>pre-install needed</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pkg install bash ipmitool libstatgrab git</span><br></pre></td></tr></table></figure><p>因為check_mk_agent需要用bash跑,沒有bash是不會動的</p><h2 id="Install-and-setup"><a href="#Install-and-setup" class="headerlink" title="Install and setup"></a>Install and setup</h2><ol><li><font size=+1 color=Green><code>取得check_mk_agent & 賦予執行權限</code></font></li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/librenms/librenms-agent.git</span><br><span class="line">cp librenms-agent/check_mk_agent_freebsd /usr/<span class="built_in">local</span>/bin/check_mk_agent</span><br><span class="line">chmod +x /usr/<span class="built_in">local</span>/bin/check_mk_agent</span><br></pre></td></tr></table></figure><p>上述的方法過時了..因為現在port裡面就有支援</p><p><code>/usr/ports/net-mgmt/check_mk_agent/</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /usr/ports/net-mgmt/check_mk_agent/</span><br><span class="line">make install clean</span><br></pre></td></tr></table></figure><ol start="2"><li><font size=+1 color=Green><code>vi /etc/services </code></font></li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># /etc/services</span></span><br><span class="line">--------------------------------------------------------------------------------------------------------------------------------</span><br><span class="line">check_mk        6556/tcp   <span class="comment">#check_mk agent</span></span><br></pre></td></tr></table></figure><p>這個是加進去的</p><ol start="3"><li><font size=+1 color=Green><code>vi /etc/inetd.conf</code></font></li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">#/etc/inetd.conf</span><br><span class="line">--------------------------------------------------------------------------------------------------------------------------------</span><br><span class="line">check_mk  stream  tcp nowait  root  /usr/local/bin/check_mk_agent check_mk_agent</span><br></pre></td></tr></table></figure><p>這個也是加進去的</p><ol start="3"><li><font size=+1 color=Green><code>vi /etc/rc.conf</code></font></li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#/etc/rc.conf</span></span><br><span class="line">--------------------------------------------------------------------------------------------------------------------------------</span><br><span class="line">inetd_enable=yes</span><br><span class="line">inetd_flags=-wW</span><br></pre></td></tr></table></figure><p>這個也是加進去的</p><ol start="4"><li><font size=+1 color=Green><code>vi /etc/hosts.allow</code></font></li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#/etc/hosts.allow</span></span><br><span class="line">--------------------------------------------------------------------------------------------------------------------------------</span><br><span class="line"><span class="comment"># Allow nagios server to access us</span></span><br><span class="line">check_mk_agent : 192.168.56.3 : allow</span><br><span class="line">check_mk_agent : ALL : deny</span><br></pre></td></tr></table></figure><p>這個也是加進去</p><ol start="5"><li><p><font size=+1 color=Green><code>/etc/rc.d/inetd start</code></font></p></li><li><p><font size=+1 color=Green><code>telnet確認一下</code></font></p></li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">telnet bsdhost 6556</span><br><span class="line">&lt;&lt;&lt;<span class="string">check_mk&gt;&gt;&gt;</span></span><br><span class="line"><span class="string">Version: 1.1.13i1</span></span><br><span class="line"><span class="string">AgentOS: freebsd</span></span><br></pre></td></tr></table></figure><p>這樣就好了</p><h2 id="結論"><a href="#結論" class="headerlink" title="結論"></a>結論</h2><p>雖然我不是很喜歡開inetd來跑,不過這些機器跟port基本上都用FW限制死了連線,加上librenms架在裡面,所以問題應該沒有那麼大</p><p>勉強還是可以這樣用的</p>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h1&gt;&lt;p&gt;Librenms需要SNMP才能監控,另外也可以使用check_mk_agent來輔助&lt;/p&gt;</summary>
    
    
    
    <category term="FreeBSD" scheme="http://kiwi0093.github.io/Wiki-site/categories/FreeBSD/"/>
    
    
    <category term="FreeBSD" scheme="http://kiwi0093.github.io/Wiki-site/tags/FreeBSD/"/>
    
  </entry>
  
  <entry>
    <title>Use SSH Key to improve connection security</title>
    <link href="http://kiwi0093.github.io/Wiki-site/wiki/FreeBSD/1-SSH_KEY/"/>
    <id>http://kiwi0093.github.io/Wiki-site/wiki/FreeBSD/1-SSH_KEY/</id>
    <published>2021-07-12T03:11:22.823Z</published>
    <updated>2021-07-13T01:38:58.768Z</updated>
    
    <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>為了家中主Server的安全,ssh的登入採用ssh key的方式進行</p><span id="more"></span><h1 id="參考網頁"><a href="#參考網頁" class="headerlink" title="參考網頁"></a>參考網頁</h1><p><a href="https://www.footmark.info/linux/centos/windows-ssh-nopassword-linux/">MIS腳印 - Windows 使用 SSH 金鑰免密碼登入 Linux</a></p><h1 id="需求工具"><a href="#需求工具" class="headerlink" title="需求工具"></a>需求工具</h1><ul><li>Windows - <a href="https://www.putty.org/">Putty</a>, <a href="https://www.puttygen.com/">Puttygen</a></li></ul><h1 id="基本概念"><a href="#基本概念" class="headerlink" title="基本概念"></a>基本概念</h1><p>基本上想要利用SSH Key來連線就是需要在Client端有private Key,對應Server上的public Key去進行連線,而Putty,WinSCP這些程式吃Putty的ppk格式,所以建立好的private key還需要轉換成ppk格式才能讓這些client使用</p><h1 id="作法"><a href="#作法" class="headerlink" title="作法"></a>作法</h1><p>有兩個方法都可以達成</p><ol><li>從Linux/FreeBSD生成Key,然後用Puttygen轉換成ppk檔</li><li>從Puttygen生成Key,然後把public Key轉貼到Linux/FreeBSD上</li></ol><h2 id="從Linux-FreeBSD生成Key"><a href="#從Linux-FreeBSD生成Key" class="headerlink" title="從Linux/FreeBSD生成Key"></a>從Linux/FreeBSD生成Key</h2><figure class="highlight zsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#確認你在登入的帳號下</span></span><br><span class="line">ssh-keygen -b 4096 -t rsa</span><br></pre></td></tr></table></figure><p>ssh-keygen其實就可以了,後面的參數是指定一些條件</p><p>-b 4096 這是採取4096 bits的加密編碼</p><p>-r rsa  這是指定產生的是rsa格式的key</p><p>執行後會產生</p><figure class="highlight zsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">~/.ssh/id_rsa</span><br><span class="line">~/.ssh/id_rsa.pub</span><br></pre></td></tr></table></figure><p>這兩個檔案</p><p>id_rsa是Private Key, id_rsa是public key</p><p>然後把public key變成<em>sshd_config</em>內定義的檔案</p><figure class="highlight zsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#預設的在/etc/ssh/sshd_config內</span></span><br><span class="line">AuthorizedKeysFile      .ssh/authorized_keys</span><br></pre></td></tr></table></figure><p>若不打算修改檔名那就需要修改public key的檔名就好了(複數Key的使用我沒試過但是大概都是放在同一個檔裡面就好了)</p><figure class="highlight zsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#使用預設的設定</span></span><br><span class="line">mv ~/.ssh/id_rsa.pub ~/.ssh/authorized_keys</span><br></pre></td></tr></table></figure><p>由於ssh的權限設定要求所以需要調整權限</p><figure class="highlight zsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">chmod 700 ~/.ssh</span><br><span class="line">chmod 644 ~/.ssh/authorized_keys</span><br></pre></td></tr></table></figure><p>然後利用sftp把id_rsa檔弄到你的windows裡面去,利用puttygen轉換檔案</p><p><img src="https://raw.githubusercontent.com/Kiwi0093/graph/master/img/puttygen-1.png" alt="Puttygen-import"></p><p>讀進去後,可以加上自己的密碼</p><p><img src="https://raw.githubusercontent.com/Kiwi0093/graph/master/img/puttygen-2.png" alt="Puttygen-save"></p><p>鍵入自己想要的密碼後Save as a ppk file就好了</p><h2 id="從Puttygen生成"><a href="#從Puttygen生成" class="headerlink" title="從Puttygen生成"></a>從Puttygen生成</h2><p><img src="https://raw.githubusercontent.com/Kiwi0093/graph/master/img/puttygen-3.png" alt="puttygen-generate"></p><p>基本上是一樣的在右下角設定好bits,確認是哪一種,然後按下Generate</p><p>就會產生Private key跟Public Key</p><p>之後只要儲存ppk檔的Private key,跟把public key的內容塞進~/.ssh/authorized_keys</p><p>就算完工,要是一個Client要管很多台,其實用puttygen生成後去塞public Key是比較方便也比較快的</p><h5 id="sshd-config"><a href="#sshd-config" class="headerlink" title="sshd_config"></a>sshd_config</h5><p>要讓SSHD接受KEY並且取消密碼登入(換言之就是只吃Key)的設定方法</p><figure class="highlight zsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#我只打算port 22可以接受ssh</span></span><br><span class="line">Port 22</span><br><span class="line"></span><br><span class="line"><span class="comment">#禁止Root帳號透過ssh登入</span></span><br><span class="line">PermitRootLogin no</span><br><span class="line"></span><br><span class="line"><span class="comment">#接受Public Key認證方式</span></span><br><span class="line">PubkeyAuthentication yes</span><br><span class="line"><span class="comment">#預設的Public Key位置檔名</span></span><br><span class="line">AuthorizedKeysFile      .ssh/authorized_keys</span><br><span class="line"></span><br><span class="line"><span class="comment">#不使用Build-in的密碼認證系統也禁止空白密碼</span></span><br><span class="line">PasswordAuthentication no</span><br><span class="line">PermitEmptyPasswords no</span><br><span class="line"></span><br><span class="line"><span class="comment">#禁止使用密碼認證登入</span></span><br><span class="line">ChallengeResponseAuthentication no</span><br><span class="line">UsePAM no</span><br></pre></td></tr></table></figure><p>改好後重新啟動sshd就好了</p><h2 id="同場加映-在企鵝下的ppk-gt-pem"><a href="#同場加映-在企鵝下的ppk-gt-pem" class="headerlink" title="同場加映 - 在企鵝下的ppk-&gt;pem"></a>同場加映 - 在企鵝下的ppk-&gt;pem</h2><p>因為時常會用Manjaro client,所以去查了一下, Manjaro安裝putty後就自動裝上puttygen了,所以不需要再安裝,使用Ubuntu/Debian的人還還需要裝上</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#安裝Putty工具</span></span><br><span class="line">apt install putty-tools</span><br></pre></td></tr></table></figure><p>有了工具就轉檔</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#把你的ppk檔轉成pem檔供ssh client直接使用</span></span><br><span class="line">puttygen yourkey.ppk -O private-openssh -o yourkey.pem</span><br></pre></td></tr></table></figure><p>轉好後就可以用以下指令登入</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#使用pem登入</span></span><br><span class="line">ssh -i /your/key/file user@hostname.or.ip</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h1&gt;&lt;p&gt;為了家中主Server的安全,ssh的登入採用ssh key的方式進行&lt;/p&gt;</summary>
    
    
    
    <category term="FreeBSD" scheme="http://kiwi0093.github.io/Wiki-site/categories/FreeBSD/"/>
    
    
    <category term="FreeBSD" scheme="http://kiwi0093.github.io/Wiki-site/tags/FreeBSD/"/>
    
    <category term="Linux" scheme="http://kiwi0093.github.io/Wiki-site/tags/Linux/"/>
    
  </entry>
  
  <entry>
    <title>Dummynet &amp; IPFW</title>
    <link href="http://kiwi0093.github.io/Wiki-site/wiki/FreeBSD/2-dummynet&amp;ipfw/"/>
    <id>http://kiwi0093.github.io/Wiki-site/wiki/FreeBSD/2-dummynet&amp;ipfw/</id>
    <published>2021-07-12T03:11:22.823Z</published>
    <updated>2021-07-12T03:11:22.823Z</updated>
    
    <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>FreeBSD Gateway可以利用ipfw來達成流量限制的功能,想要使用這個除了/etc/rc.conf需要設定以外,還需要讓kernel的dummynet啟動才會正常啟動</p><span id="more"></span><h1 id="Dummynet"><a href="#Dummynet" class="headerlink" title="Dummynet"></a>Dummynet</h1><h2 id="動態載入"><a href="#動態載入" class="headerlink" title="動態載入"></a>動態載入</h2><p>由於現在都是使用Generic的Kernel(減少compile Kernel的動作)所以使用kldload來load dummynet.ko</p><p>手動載入</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kldload dummynet</span><br></pre></td></tr></table></figure><p>想要確認有沒有跑起來請用</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kldstat</span><br></pre></td></tr></table></figure><p>這個指令會列出所有動態載入的.ko</p><h2 id="開機自動載入"><a href="#開機自動載入" class="headerlink" title="開機自動載入"></a>開機自動載入</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># /boot/loader.conf</span><br><span class="line">dummynet_load=&quot;YES&quot;</span><br></pre></td></tr></table></figure><p>之後重開機的時候就會自動載入了</p><h1 id="ipfw"><a href="#ipfw" class="headerlink" title="ipfw"></a>ipfw</h1><h2 id="etc-rc-conf"><a href="#etc-rc-conf" class="headerlink" title="/etc/rc.conf"></a>/etc/rc.conf</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">firewall_enable=<span class="string">&quot;YES&quot;</span></span><br><span class="line">firewall_script=<span class="string">&quot;/etc/ipfw.conf&quot;</span></span><br><span class="line">natd_enable=<span class="string">&quot;NO&quot;</span></span><br></pre></td></tr></table></figure><p>上述設定的意思就是啟動ipfw,設定檔為/etc/ipfw.conf,並且不啟動natd</p><h2 id="etc-ipfw-conf"><a href="#etc-ipfw-conf" class="headerlink" title="/etc/ipfw.conf"></a>/etc/ipfw.conf</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#定義介面</span></span><br><span class="line">EXT_IF=<span class="string">&quot;ext0&quot;</span></span><br><span class="line">INT_IF=<span class="string">&quot;int0&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#定義網路</span></span><br><span class="line">DMZ_NET=<span class="string">&quot;192.168.0.0/24&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#定義特定IP與名稱</span></span><br><span class="line">RDP_PROXY=<span class="string">&quot;192.168.0.13&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#定義類型與速度</span></span><br><span class="line">P2P_UP=<span class="string">&quot;100KBytes/s&quot;</span></span><br><span class="line">VPN_UP=<span class="string">&quot;500KBytes/s&quot;</span></span><br><span class="line">RDP_P2P=<span class="string">&quot;500KBytes/s&quot;</span></span><br><span class="line">RDP_BAND=<span class="string">&quot;100KBytes/s&quot;</span></span><br><span class="line">SERV_UP=<span class="string">&quot;350KBytes/s&quot;</span></span><br><span class="line">GUEST_BAND=<span class="string">&quot;30KBytes/s&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#流量限制完整設定</span></span><br><span class="line"><span class="comment">#清除規則,並加上全部通行的規則</span></span><br><span class="line">ipfw -f flush</span><br><span class="line">ipfw -q add 10 allow all from any to any</span><br><span class="line"></span><br><span class="line"><span class="comment">#使用ipfw pipe來定義每一項流量限制與編號</span></span><br><span class="line">ipfw pipe 1 config bw <span class="variable">$VPN_UP</span></span><br><span class="line">ipfw pipe 2 config bw <span class="variable">$P2P_UP</span></span><br><span class="line">ipfw pipe 3 config bw <span class="variable">$RDP_P2P</span></span><br><span class="line">ipfw pipe 4 config bw <span class="variable">$SERV_UP</span></span><br><span class="line">ipfw pipe 5 config bw <span class="variable">$GUEST_BAND</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#利用pipe定義從哪裡到哪裡的流量</span></span><br><span class="line">ipfw add 20 pipe 1 ip from any to <span class="variable">$VPN_NET</span></span><br><span class="line">ipfw add 25 pipe 3 ip from <span class="variable">$P2P1_IP</span> to any 3389 <span class="keyword">in</span> recv <span class="variable">$INT_IF</span></span><br><span class="line">ipfw add 30 pipe 2 ip from <span class="variable">$P2P1_IP</span> to any <span class="keyword">in</span> recv <span class="variable">$INT_IF</span></span><br><span class="line">ipfw add 40 pipe 2 ip from <span class="variable">$P2P2_IP</span> to any <span class="keyword">in</span> recv <span class="variable">$INT_IF</span></span><br><span class="line">ipfw add 110 pipe 5 ip from <span class="variable">$GUEST_NET</span> to any</span><br><span class="line">ipfw add 120 pipe 5 ip from any to <span class="variable">$GUEST_NET</span></span><br><span class="line">ipfw add 210 pipe 4 ip from <span class="variable">$DMZ_NET</span> to any via ext0</span><br></pre></td></tr></table></figure><p>這個規則基本上依照ipfw add 後的數字定義優先權數字越少的規則優先權越高</p>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h1&gt;&lt;p&gt;FreeBSD Gateway可以利用ipfw來達成流量限制的功能,想要使用這個除了/etc/rc.conf需要設定以外,還需要讓kernel的dummynet啟動才會正常啟動&lt;/p&gt;</summary>
    
    
    
    <category term="FreeBSD" scheme="http://kiwi0093.github.io/Wiki-site/categories/FreeBSD/"/>
    
    
    <category term="FreeBSD" scheme="http://kiwi0093.github.io/Wiki-site/tags/FreeBSD/"/>
    
  </entry>
  
  <entry>
    <title>整合型Archlinux安裝Script - 8.arch_v2ray_gate_k.sh說明</title>
    <link href="http://kiwi0093.github.io/Wiki-site/wiki/Linux/Arch%20Linux/8-arch_v2ray_gate_k/"/>
    <id>http://kiwi0093.github.io/Wiki-site/wiki/Linux/Arch%20Linux/8-arch_v2ray_gate_k/</id>
    <published>2021-06-22T16:00:00.000Z</published>
    <updated>2021-07-12T03:11:22.830Z</updated>
    
    <content type="html"><![CDATA[<h1 id="本條目已不再適用-不僅停止維護-原先的script也被移除了"><a href="#本條目已不再適用-不僅停止維護-原先的script也被移除了" class="headerlink" title="本條目已不再適用,不僅停止維護,原先的script也被移除了"></a><em>本條目已不再適用,不僅停止維護,原先的script也被移除了</em></h1><span id="more"></span><h2 id="使用前"><a href="#使用前" class="headerlink" title="使用前"></a>使用前</h2><ul><li><p>這個script預設是自動帶出來跑的,但是也是可以手動自己跑</p></li><li><p>這個script是用在有兩張網路卡的條件下的</p></li><li><p>Script的直接位置如下：</p><p><a href="https://kiwi0093.github.io/script/Arch/arch_v2ray_gate_k.sh">https://Kiwi0093.github.io/script/Arch/arch_v2ray_gate_k.sh</a></p></li></ul><h2 id="Script內容"><a href="#Script內容" class="headerlink" title="Script內容"></a>Script內容</h2><h3 id="Script內容說明"><a href="#Script內容說明" class="headerlink" title="Script內容說明"></a>Script內容說明</h3><h4 id="基本定義"><a href="#基本定義" class="headerlink" title="基本定義"></a>基本定義</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/zsh</span></span><br><span class="line"><span class="comment">#Parmeter Pre-Define</span></span><br><span class="line">COLOR1=<span class="string">&#x27;\e[94m&#x27;</span></span><br><span class="line">COLOR2=<span class="string">&#x27;\e[32m&#x27;</span></span><br><span class="line">NC=<span class="string">&#x27;\e[0m&#x27;</span></span><br></pre></td></tr></table></figure><p>定義Script中字串的顏色</p><h4 id="設定時區與硬體時間"><a href="#設定時區與硬體時間" class="headerlink" title="設定時區與硬體時間"></a>設定時區與硬體時間</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#change Timezone to CTS(Taipei)</span></span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;<span class="variable">$&#123;COLOR1&#125;</span>Please select your time zone\n1)Taipei\n2)Shanghai\n*)Whatever..I don&#x27;t care\n<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line"><span class="keyword">while</span> :</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line"><span class="built_in">read</span> ZONE</span><br><span class="line"><span class="keyword">case</span> <span class="variable">$ZONE</span> <span class="keyword">in</span></span><br><span class="line">1)</span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;<span class="variable">$&#123;COLOR1&#125;</span>Set Time Zone to Asia/Taipei<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line">ln -sf /usr/share/zoneinfo/Asia/Taipei /etc/localtime</span><br><span class="line">hwclock --systohc --utc</span><br><span class="line"><span class="built_in">break</span></span><br><span class="line">;;</span><br><span class="line">2)</span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;<span class="variable">$&#123;COLOR1&#125;</span>Set Time Zone to Asia/Shanghai<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line">ln -sf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime</span><br><span class="line">hwclock --systohc --utc</span><br><span class="line"><span class="built_in">break</span></span><br><span class="line">;;</span><br><span class="line">*)</span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;<span class="variable">$&#123;COLOR1&#125;</span>Nobody cares the local time!!<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line">hwclock --systohc --utc</span><br><span class="line"><span class="built_in">break</span></span><br><span class="line">;;</span><br><span class="line"><span class="keyword">esac</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;<span class="variable">$&#123;COLOR2&#125;</span>Completed<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br></pre></td></tr></table></figure><h4 id="網路設定"><a href="#網路設定" class="headerlink" title="網路設定"></a>網路設定</h4><h5 id="Hostname設定"><a href="#Hostname設定" class="headerlink" title="Hostname設定"></a>Hostname設定</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#Hostname</span></span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;<span class="variable">$&#123;COLOR1&#125;</span>Please input your hostname\n<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line"><span class="built_in">read</span> HOSTNAME</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;HOSTNAME&#125;</span> &gt; /etc/hostname</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;127.0.0.1 localhost <span class="variable">$&#123;HOSTNAME&#125;</span>&quot;</span> &gt;&gt; /etc/hosts</span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;<span class="variable">$&#123;COLOR2&#125;</span>Completed<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br></pre></td></tr></table></figure><h5 id="輸入卡號定義NIC名稱"><a href="#輸入卡號定義NIC名稱" class="headerlink" title="輸入卡號定義NIC名稱"></a>輸入卡號定義NIC名稱</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#Set Mac Address</span></span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;<span class="variable">$&#123;COLOR1&#125;</span>Define your NIC by Mac address<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;<span class="variable">$&#123;COLOR1&#125;</span>Please input your EXT Mac Address:\n<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line"><span class="built_in">read</span> OUTSIDE</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;SUBSYSTEM==&quot;net&quot;, ACTION==&quot;add&quot;, ATTR&#123;address&#125;==&quot;&#x27;</span><span class="variable">$&#123;OUTSIDE&#125;</span><span class="string">&#x27;&quot;, NAME=&quot;EXT0&quot;&#x27;</span> &gt; /etc/udev/rules.d/10-network.rules</span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;<span class="variable">$&#123;COLOR1&#125;</span>Please input your INT Mac Address:\n<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line"><span class="built_in">read</span> INSIDE</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;SUBSYSTEM==&quot;net&quot;, ACTION==&quot;add&quot;, ATTR&#123;address&#125;==&quot;&#x27;</span><span class="variable">$&#123;INSIDE&#125;</span><span class="string">&#x27;&quot;, NAME=&quot;INT0&quot;&#x27;</span> &gt;&gt; /etc/udev/rules.d/10-network.rules</span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;<span class="variable">$&#123;COLOR2&#125;</span>Completed<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br></pre></td></tr></table></figure><ul><li>這個設定是利用固定的**<em>Mac Address</em><strong>來定義</strong><em>NIC Interface</em><strong>的名字為</strong><em>EXT0</em>**</li></ul><h5 id="設定對內固定IP"><a href="#設定對內固定IP" class="headerlink" title="設定對內固定IP"></a>設定對內固定IP</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Set INT network</span></span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;<span class="variable">$&#123;COLOR1&#125;</span>Setting your INT0<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;Description=&#x27;INT0 IP SETTING&#x27;&quot;</span> &gt; /etc/netctl/INT0.service</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;Interface=INT0&quot;</span> &gt;&gt; /etc/netctl/INT0.service</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;Connection=ethernet&quot;</span> &gt;&gt; /etc/netctl/INT0.service</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;IP=static&quot;</span> &gt;&gt; /etc/netctl/INT0.service</span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;<span class="variable">$&#123;COLOR1&#125;</span>Please input your INT IP:\n<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line"><span class="built_in">read</span> INT_IP</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;Address=(&#x27;<span class="variable">$&#123;INT_IP&#125;</span>/24&#x27;)&quot;</span> &gt;&gt; /etc/netctl/INT0.service</span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;<span class="variable">$&#123;COLOR2&#125;</span>Enable INT0<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line">netctl <span class="built_in">enable</span> INT0.service</span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;<span class="variable">$&#123;COLOR2&#125;</span>Finished.<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br></pre></td></tr></table></figure><ul><li>IP請設定在192.168/16的範圍內</li></ul><h5 id="設定對外網路-可選固定IP或是PPPOE方式連線"><a href="#設定對外網路-可選固定IP或是PPPOE方式連線" class="headerlink" title="設定對外網路,可選固定IP或是PPPOE方式連線"></a>設定對外網路,可選固定IP或是PPPOE方式連線</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Set EXT network</span></span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;<span class="variable">$&#123;COLOR1&#125;</span>Please select your connection\n1)PPPOE\n2)Static IP\n&quot;</span></span><br><span class="line"><span class="keyword">while</span></span><br><span class="line"><span class="keyword">do</span></span><br><span class="line"><span class="built_in">read</span> CONNECT</span><br><span class="line"><span class="keyword">case</span> <span class="variable">$CONNECT</span> <span class="keyword">in</span></span><br><span class="line">1)</span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;<span class="variable">$&#123;COLOR1&#125;</span>Setting your PPPOE<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;Description=&#x27;EXT0 PPPOE SETTING&#x27;&quot;</span> &gt; /etc/netctl/EXT0.service</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;Interface=EXT0&quot;</span> &gt;&gt; /etc/netctl/EXT0.service</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;Connection=pppoe&quot;</span> &gt;&gt; /etc/netctl/EXT0.service</span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;<span class="variable">$&#123;COLOR1&#125;</span>Please input your PPPOE Account:\n:<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line"><span class="built_in">read</span> ISP</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;User=&#x27;<span class="variable">$&#123;ISP&#125;</span>&#x27;&quot;</span> &gt;&gt; /etc/netctl/EXT0.service</span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;<span class="variable">$&#123;COLOR1&#125;</span>Please input your PPPOE password:\n<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line"><span class="built_in">read</span> ISPPW</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;Password=&#x27;<span class="variable">$&#123;ISPPW&#125;</span>&#x27;&quot;</span> &gt;&gt; /etc/netctl/EXT0.service</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;ConnectionMode=&#x27;persist&#x27;&quot;</span> &gt;&gt; /etc/netctl/EXT0.service</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;UsePeerDNS=false&quot;</span> &gt;&gt; /etc/netctl/EXT0.service</span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;<span class="variable">$&#123;COLOR1&#125;</span>Enable EXT0&#123;NC&#125;&quot;</span></span><br><span class="line">netctl <span class="built_in">enable</span> EXT0.service</span><br><span class="line"><span class="built_in">break</span></span><br><span class="line">;;</span><br><span class="line">2)</span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;<span class="variable">$&#123;COLOR1&#125;</span>Setting your Static IP<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;Description=&#x27;EXT0 IP SETTING&#x27;&quot;</span> &gt; /etc/netctl/EXT0.service</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;Interface=EXT0&quot;</span> &gt;&gt; /etc/netctl/EXT0.service</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;Connection=ethernet&quot;</span> &gt;&gt; /etc/netctl/EXT0.service</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;IP=static&quot;</span> &gt;&gt; /etc/netctl/EXT0.service</span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;<span class="variable">$&#123;COLOR1&#125;</span>Please input your IP address:\n<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line"><span class="built_in">read</span> EXT_IP</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;Address=(&#x27;<span class="variable">$&#123;EXT_IP&#125;</span>/24&#x27;)&quot;</span> &gt;&gt; /etc/netctl/EXT0.service</span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;<span class="variable">$&#123;COLOR1&#125;</span>Please input Gateway IP address:\n<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line"><span class="built_in">read</span> GATE_IP</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;Gateway=&#x27;<span class="variable">$&#123;GATE_IP&#125;</span>&#x27;&quot;</span> &gt;&gt; /etc/netctl/EXT0.service</span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;<span class="variable">$&#123;COLOR1&#125;</span>Please input DNS IP address:\n<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line"><span class="built_in">read</span> DNS_IP</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;DNS=(&#x27;<span class="variable">$&#123;DNS_IP&#125;</span>&#x27;)&quot;</span> &gt;&gt; /etc/netctl/EXT0.service</span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;<span class="variable">$&#123;COLOR2&#125;</span>Enable EXT0<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line">netctl <span class="built_in">enable</span> EXT0.service</span><br><span class="line"><span class="built_in">break</span></span><br><span class="line">;;</span><br><span class="line"><span class="keyword">esac</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;<span class="variable">$&#123;COLOR2&#125;</span>EXT set completed.<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br></pre></td></tr></table></figure><h5 id="設定Gateway-Routing"><a href="#設定Gateway-Routing" class="headerlink" title="設定Gateway Routing"></a>設定Gateway Routing</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#Set Nat</span></span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;<span class="variable">$&#123;COLOR1&#125;</span>Open package fowrading<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;net.ipv4.ip_forward=1&quot;</span> &gt; /etc/sysctl/30-ipforward.conf</span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;<span class="variable">$&#123;COLOR2&#125;</span>Finished.<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br></pre></td></tr></table></figure><h5 id="iptable設定與systemd"><a href="#iptable設定與systemd" class="headerlink" title="iptable設定與systemd"></a>iptable設定與systemd</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># iptable script</span></span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;<span class="variable">$&#123;COLOR1&#125;</span>Create Iptable start script<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;#Natd&quot;</span> &gt; /etc/iptables/iptable.sh</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;iptables -t nat -A POSTROUTING -s 192.168/16 -j MASQUERADE&quot;</span> &gt;&gt; /etc/iptables/iptable.sh</span><br><span class="line">chmod 750 /etc/iptables/iptable.sh</span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;<span class="variable">$&#123;COLOR2&#125;</span>Finished.<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># systemd</span></span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;<span class="variable">$&#123;COLOR1&#125;</span>Create Systemd Service<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;[Unit] &gt; /etc/systemd/system/iptables.service</span></span><br><span class="line"><span class="string">echo &quot;</span>Description=iptables rules &gt;&gt; /etc/systemd/system/iptables.service</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot; &quot;</span> &gt;&gt; /etc/systemd/system/iptables.service</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;[Service]&quot;</span> &gt;&gt; /etc/systemd/system/iptables.service</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;ExecStart=/bin/sh /etc/iptables/iptable.sh&quot;</span> &gt;&gt; /etc/systemd/system/iptables.service</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot; &quot;</span> &gt;&gt; /etc/systemd/system/iptables.service</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;[Install]&quot;</span> &gt;&gt; /etc/systemd/system/iptables.service</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;WantedBy=multi-user.target&quot;</span> &gt;&gt; /etc/systemd/system/iptables.service</span><br><span class="line">systemctl <span class="built_in">enable</span> iptables.service</span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;<span class="variable">$&#123;COLOR2&#125;</span>Finished.<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br></pre></td></tr></table></figure><h4 id="變更root密碼與建立其他帳號"><a href="#變更root密碼與建立其他帳號" class="headerlink" title="變更root密碼與建立其他帳號"></a>變更root密碼與建立其他帳號</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#Root Password</span></span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;<span class="variable">$&#123;COLOR1&#125;</span>設定你的root密碼<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line">passwd</span><br><span class="line">chsh -s /bin/zsh</span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;<span class="variable">$&#123;COLOR2&#125;</span>Completed<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#add User</span></span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;<span class="variable">$&#123;COLOR1&#125;</span>Add user account:<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line"><span class="built_in">echo</span> -n <span class="string">&quot;<span class="variable">$&#123;COLOR1&#125;</span>What ID you want:<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line"><span class="built_in">read</span> YOURID</span><br><span class="line">useradd -m -g root -s /bin/zsh <span class="variable">$&#123;YOURID&#125;</span></span><br><span class="line">passwd <span class="variable">$&#123;YOURID&#125;</span></span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;<span class="variable">$&#123;COLOR2&#125;</span>Completed<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;<span class="variable">$&#123;COLOR1&#125;</span>Add <span class="variable">$YOURID</span> into sudo list<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line">pacman -Syu sudo</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$&#123;YOURID&#125;</span> ALL=(ALL) ALL&quot;</span> &gt;&gt; /etc/sudoers</span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;<span class="variable">$&#123;COLOR2&#125;</span>Completed<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br></pre></td></tr></table></figure><h4 id="安裝程式"><a href="#安裝程式" class="headerlink" title="安裝程式"></a>安裝程式</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#install Tools</span></span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;<span class="variable">$&#123;COLOR1&#125;</span>Install Packages<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;<span class="variable">$&#123;COLOR1&#125;</span>screen<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line">pacman -Sy screen v2ray</span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;<span class="variable">$&#123;COLOR2&#125;</span>Completed<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br></pre></td></tr></table></figure><h4 id="安裝Bootloader"><a href="#安裝Bootloader" class="headerlink" title="安裝Bootloader"></a>安裝Bootloader</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#install Bootloader</span></span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;<span class="variable">$&#123;COLOR1&#125;</span>Install grub Boot Loader into /dev/sda<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line">grub-install --target=i386-pc /dev/sda</span><br><span class="line">grub-mkconfig -o /boot/grub/grub.cfg</span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;<span class="variable">$&#123;COLOR2&#125;</span>Completed<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br></pre></td></tr></table></figure><h4 id="同步後離開Arch-chroot"><a href="#同步後離開Arch-chroot" class="headerlink" title="同步後離開Arch-chroot"></a>同步後離開Arch-chroot</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#Finished install</span></span><br><span class="line">sync</span><br><span class="line">sync</span><br><span class="line">sync</span><br><span class="line"><span class="built_in">exit</span></span><br></pre></td></tr></table></figure><h3 id="完整版的script"><a href="#完整版的script" class="headerlink" title="完整版的script"></a>完整版的script</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#------------------------------------------------------------------------------</span></span><br><span class="line"><span class="comment">#(所有動作都是在change root內完成的)</span></span><br><span class="line"><span class="comment">#------------------------------------------------------------------------------</span></span><br><span class="line"><span class="comment">#!/bin/zsh</span></span><br><span class="line"><span class="comment">#Parmeter Pre-Define</span></span><br><span class="line">COLOR1=<span class="string">&#x27;\e[94m&#x27;</span></span><br><span class="line">COLOR2=<span class="string">&#x27;\e[32m&#x27;</span></span><br><span class="line">NC=<span class="string">&#x27;\e[0m&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#change Timezone to CTS(Taipei)</span></span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;<span class="variable">$&#123;COLOR1&#125;</span>Please select your time zone\n1)Taipei\n2)Shanghai\n*)Whatever..I don&#x27;t care\n<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line"><span class="keyword">while</span> :</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line"><span class="built_in">read</span> ZONE</span><br><span class="line"><span class="keyword">case</span> <span class="variable">$ZONE</span> <span class="keyword">in</span></span><br><span class="line">1)</span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;<span class="variable">$&#123;COLOR1&#125;</span>Set Time Zone to Asia/Taipei<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line">ln -sf /usr/share/zoneinfo/Asia/Taipei /etc/localtime</span><br><span class="line">hwclock --systohc --utc</span><br><span class="line"><span class="built_in">break</span></span><br><span class="line">;;</span><br><span class="line">2)</span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;<span class="variable">$&#123;COLOR1&#125;</span>Set Time Zone to Asia/Shanghai<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line">ln -sf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime</span><br><span class="line">hwclock --systohc --utc</span><br><span class="line"><span class="built_in">break</span></span><br><span class="line">;;</span><br><span class="line">*)</span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;<span class="variable">$&#123;COLOR1&#125;</span>Nobody cares the local time!!<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line">hwclock --systohc --utc</span><br><span class="line"><span class="built_in">break</span></span><br><span class="line">;;</span><br><span class="line"><span class="keyword">esac</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;<span class="variable">$&#123;COLOR2&#125;</span>Completed<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#Set Mac Address</span></span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;<span class="variable">$&#123;COLOR1&#125;</span>Define your NIC by Mac address<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;<span class="variable">$&#123;COLOR1&#125;</span>Please input your EXT Mac Address:\n<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line"><span class="built_in">read</span> OUTSIDE</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;SUBSYSTEM==&quot;net&quot;, ACTION==&quot;add&quot;, ATTR&#123;address&#125;==&quot;&#x27;</span><span class="variable">$&#123;OUTSIDE&#125;</span><span class="string">&#x27;&quot;, NAME=&quot;EXT0&quot;&#x27;</span> &gt; /etc/udev/rules.d/10-network.rules</span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;<span class="variable">$&#123;COLOR1&#125;</span>Please input your INT Mac Address:\n<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line"><span class="built_in">read</span> INSIDE</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;SUBSYSTEM==&quot;net&quot;, ACTION==&quot;add&quot;, ATTR&#123;address&#125;==&quot;&#x27;</span><span class="variable">$&#123;INSIDE&#125;</span><span class="string">&#x27;&quot;, NAME=&quot;INT0&quot;&#x27;</span> &gt;&gt; /etc/udev/rules.d/10-network.rules</span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;<span class="variable">$&#123;COLOR2&#125;</span>Completed<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Set INT network</span></span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;<span class="variable">$&#123;COLOR1&#125;</span>Setting your INT0<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;Description=&#x27;INT0 IP SETTING&#x27;&quot;</span> &gt; /etc/netctl/INT0.service</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;Interface=INT0&quot;</span> &gt;&gt; /etc/netctl/INT0.service</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;Connection=ethernet&quot;</span> &gt;&gt; /etc/netctl/INT0.service</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;IP=static&quot;</span> &gt;&gt; /etc/netctl/INT0.service</span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;<span class="variable">$&#123;COLOR1&#125;</span>Please input your INT IP:\n<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line"><span class="built_in">read</span> INT_IP</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;Address=(&#x27;<span class="variable">$&#123;INT_IP&#125;</span>/24&#x27;)&quot;</span> &gt;&gt; /etc/netctl/INT0.service</span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;<span class="variable">$&#123;COLOR2&#125;</span>Enable INT0<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line">netctl <span class="built_in">enable</span> INT0.service</span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;<span class="variable">$&#123;COLOR2&#125;</span>Finished.<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Set EXT network</span></span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;<span class="variable">$&#123;COLOR1&#125;</span>Please select your connection\n1)PPPOE\n2)Static IP\n&quot;</span></span><br><span class="line"><span class="keyword">while</span></span><br><span class="line"><span class="keyword">do</span></span><br><span class="line"><span class="built_in">read</span> CONNECT</span><br><span class="line"><span class="keyword">case</span> <span class="variable">$CONNECT</span> <span class="keyword">in</span></span><br><span class="line">1)</span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;<span class="variable">$&#123;COLOR1&#125;</span>Setting your PPPOE<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;Description=&#x27;EXT0 PPPOE SETTING&#x27;&quot;</span> &gt; /etc/netctl/EXT0.service</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;Interface=EXT0&quot;</span> &gt;&gt; /etc/netctl/EXT0.service</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;Connection=pppoe&quot;</span> &gt;&gt; /etc/netctl/EXT0.service</span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;<span class="variable">$&#123;COLOR1&#125;</span>Please input your PPPOE Account:\n:<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line"><span class="built_in">read</span> ISP</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;User=&#x27;<span class="variable">$&#123;ISP&#125;</span>&#x27;&quot;</span> &gt;&gt; /etc/netctl/EXT0.service</span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;<span class="variable">$&#123;COLOR1&#125;</span>Please input your PPPOE password:\n<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line"><span class="built_in">read</span> ISPPW</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;Password=&#x27;<span class="variable">$&#123;ISPPW&#125;</span>&#x27;&quot;</span> &gt;&gt; /etc/netctl/EXT0.service</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;ConnectionMode=&#x27;persist&#x27;&quot;</span> &gt;&gt; /etc/netctl/EXT0.service</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;UsePeerDNS=false&quot;</span> &gt;&gt; /etc/netctl/EXT0.service</span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;<span class="variable">$&#123;COLOR1&#125;</span>Enable EXT0&#123;NC&#125;&quot;</span></span><br><span class="line">netctl <span class="built_in">enable</span> EXT0.service</span><br><span class="line"><span class="built_in">break</span></span><br><span class="line">;;</span><br><span class="line">2)</span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;<span class="variable">$&#123;COLOR1&#125;</span>Setting your Static IP<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;Description=&#x27;EXT0 IP SETTING&#x27;&quot;</span> &gt; /etc/netctl/EXT0.service</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;Interface=EXT0&quot;</span> &gt;&gt; /etc/netctl/EXT0.service</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;Connection=ethernet&quot;</span> &gt;&gt; /etc/netctl/EXT0.service</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;IP=static&quot;</span> &gt;&gt; /etc/netctl/EXT0.service</span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;<span class="variable">$&#123;COLOR1&#125;</span>Please input your IP address:\n<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line"><span class="built_in">read</span> EXT_IP</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;Address=(&#x27;<span class="variable">$&#123;EXT_IP&#125;</span>/24&#x27;)&quot;</span> &gt;&gt; /etc/netctl/EXT0.service</span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;<span class="variable">$&#123;COLOR1&#125;</span>Please input Gateway IP address:\n<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line"><span class="built_in">read</span> GATE_IP</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;Gateway=&#x27;<span class="variable">$&#123;GATE_IP&#125;</span>&#x27;&quot;</span> &gt;&gt; /etc/netctl/EXT0.service</span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;<span class="variable">$&#123;COLOR1&#125;</span>Please input DNS IP address:\n<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line"><span class="built_in">read</span> DNS_IP</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;DNS=(&#x27;<span class="variable">$&#123;DNS_IP&#125;</span>&#x27;)&quot;</span> &gt;&gt; /etc/netctl/EXT0.service</span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;<span class="variable">$&#123;COLOR2&#125;</span>Enable EXT0<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line">netctl <span class="built_in">enable</span> EXT0.service</span><br><span class="line"><span class="built_in">break</span></span><br><span class="line">;;</span><br><span class="line"><span class="keyword">esac</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;<span class="variable">$&#123;COLOR2&#125;</span>EXT set completed.<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#Set Nat</span></span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;<span class="variable">$&#123;COLOR1&#125;</span>Open package fowrading<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;net.ipv4.ip_forward=1&quot;</span> &gt; /etc/sysctl/30-ipforward.conf</span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;<span class="variable">$&#123;COLOR2&#125;</span>Finished.<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># iptable script</span></span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;<span class="variable">$&#123;COLOR1&#125;</span>Create Iptable start script<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;#Natd&quot;</span> &gt; /etc/iptables/iptable.sh</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;iptables -t nat -A POSTROUTING -s 192.168/16 -j MASQUERADE&quot;</span> &gt;&gt; /etc/iptables/iptable.sh</span><br><span class="line">chmod 750 /etc/iptables/iptable.sh</span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;<span class="variable">$&#123;COLOR2&#125;</span>Finished.<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># systemd</span></span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;<span class="variable">$&#123;COLOR1&#125;</span>Create Systemd Service<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;[Unit] &gt; /etc/systemd/system/iptables.service</span></span><br><span class="line"><span class="string">echo &quot;</span>Description=iptables rules &gt;&gt; /etc/systemd/system/iptables.service</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot; &quot;</span> &gt;&gt; /etc/systemd/system/iptables.service</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;[Service]&quot;</span> &gt;&gt; /etc/systemd/system/iptables.service</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;ExecStart=/bin/sh /etc/iptables/iptable.sh&quot;</span> &gt;&gt; /etc/systemd/system/iptables.service</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot; &quot;</span> &gt;&gt; /etc/systemd/system/iptables.service</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;[Install]&quot;</span> &gt;&gt; /etc/systemd/system/iptables.service</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;WantedBy=multi-user.target&quot;</span> &gt;&gt; /etc/systemd/system/iptables.service</span><br><span class="line">systemctl <span class="built_in">enable</span> iptables.service</span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;<span class="variable">$&#123;COLOR2&#125;</span>Finished.<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#Root Password</span></span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;<span class="variable">$&#123;COLOR1&#125;</span>設定你的root密碼<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line">passwd</span><br><span class="line">chsh -s /bin/zsh</span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;<span class="variable">$&#123;COLOR2&#125;</span>Completed<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#add User</span></span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;<span class="variable">$&#123;COLOR1&#125;</span>Add user account:<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line"><span class="built_in">echo</span> -n <span class="string">&quot;<span class="variable">$&#123;COLOR1&#125;</span>What ID you want:<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line"><span class="built_in">read</span> YOURID</span><br><span class="line">useradd -m -g root -s /bin/zsh <span class="variable">$&#123;YOURID&#125;</span></span><br><span class="line">passwd <span class="variable">$&#123;YOURID&#125;</span></span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;<span class="variable">$&#123;COLOR2&#125;</span>Completed<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;<span class="variable">$&#123;COLOR1&#125;</span>Add <span class="variable">$YOURID</span> into sudo list<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line">pacman -Syu sudo</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$&#123;YOURID&#125;</span> ALL=(ALL) ALL&quot;</span> &gt;&gt; /etc/sudoers</span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;<span class="variable">$&#123;COLOR2&#125;</span>Completed<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#install Tools</span></span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;<span class="variable">$&#123;COLOR1&#125;</span>Install Packages<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;<span class="variable">$&#123;COLOR1&#125;</span>screen<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line">pacman -Sy screen v2ray</span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;<span class="variable">$&#123;COLOR2&#125;</span>Completed<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#install Bootloader</span></span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;<span class="variable">$&#123;COLOR1&#125;</span>Install grub Boot Loader into /dev/sda<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line">grub-install --target=i386-pc /dev/sda</span><br><span class="line">grub-mkconfig -o /boot/grub/grub.cfg</span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">&quot;<span class="variable">$&#123;COLOR2&#125;</span>Completed<span class="variable">$&#123;NC&#125;</span>&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#Finished install</span></span><br><span class="line">sync</span><br><span class="line">sync</span><br><span class="line">sync</span><br><span class="line"><span class="built_in">exit</span></span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;本條目已不再適用-不僅停止維護-原先的script也被移除了&quot;&gt;&lt;a href=&quot;#本條目已不再適用-不僅停止維護-原先的script也被移除了&quot; class=&quot;headerlink&quot; title=&quot;本條目已不再適用,不僅停止維護,原先的script也被移除了&quot;&gt;&lt;/a&gt;&lt;em&gt;本條目已不再適用,不僅停止維護,原先的script也被移除了&lt;/em&gt;&lt;/h1&gt;</summary>
    
    
    
    <category term="Linux" scheme="http://kiwi0093.github.io/Wiki-site/categories/Linux/"/>
    
    <category term="Arch Linux" scheme="http://kiwi0093.github.io/Wiki-site/categories/Linux/Arch-Linux/"/>
    
    
    <category term="Linux" scheme="http://kiwi0093.github.io/Wiki-site/tags/Linux/"/>
    
    <category term="Archlinux" scheme="http://kiwi0093.github.io/Wiki-site/tags/Archlinux/"/>
    
  </entry>
  
</feed>
